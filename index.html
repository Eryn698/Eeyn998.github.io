<!DOCTYPE html>


<html lang="en">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> Hexo</title>
  <meta name="generator" content="hexo-theme-ayer">
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover2.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">Hexo</a></h1>
      <div id="subtitle-box">
        
          <span id="subtitle">面朝大海，春暖花开</span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>




<!-- Subtitle -->

<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-react基础Day04-React原理揭秘&amp;React路由基础"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day04-React%E5%8E%9F%E7%90%86%E6%8F%AD%E7%A7%98&React%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80/"
    >Day4 React原理揭秘&amp;React路由基础</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day04-React%E5%8E%9F%E7%90%86%E6%8F%AD%E7%A7%98&React%E8%B7%AF%E7%94%B1%E5%9F%BA%E7%A1%80/" class="article-date">
  <time datetime="2022-01-17T13:26:31.000Z" itemprop="datePublished">2022-01-17</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="React原理揭秘"><a href="#React原理揭秘" class="headerlink" title="React原理揭秘"></a>React原理揭秘</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够说出React组件的更新机制</li>
<li>能够对组件进行性能优化</li>
<li>能够说出虚拟DOM和DIff算法</li>
</ul>
<h2 id="组件更新机制"><a href="#组件更新机制" class="headerlink" title="组件更新机制"></a>组件更新机制</h2><ul>
<li><p>setState() 的两个作用</p>
<ul>
<li>修改state</li>
<li>更新组件</li>
</ul>
</li>
<li><p>过程：父组件重新渲染时，也会重新渲染子组件，但只会渲染当前组件子树（当前组件以其所有子组件）</p>
</li>
</ul>
<p><img src="images/%E7%BB%84%E4%BB%B6%E6%9B%B4%E6%96%B0.png"></p>
<h2 id="组件性能优化"><a href="#组件性能优化" class="headerlink" title="组件性能优化"></a>组件性能优化</h2><h3 id="减轻state"><a href="#减轻state" class="headerlink" title="减轻state"></a>减轻state</h3><ul>
<li>减轻state：只存储跟组件渲染相关的数据（比如：count/ 列表数据 /loading等）</li>
<li>注意：不用做渲染的数据不要放在state中</li>
<li>对于这种需要在多个方法中用到的数据，应该放到this中</li>
</ul>
<p><img src="images/%E5%87%8F%E8%BD%BBstate.png"></p>
<h3 id="避免不必要的重新渲染"><a href="#避免不必要的重新渲染" class="headerlink" title="避免不必要的重新渲染"></a>避免不必要的重新渲染</h3><ul>
<li>组件更新机制：父组件更新会引起子组件也被更新，这种思路很清晰</li>
<li>问题：子组件没有任何变化时也会重新渲染</li>
<li>如果避免不必要的重新渲染？</li>
<li>解决方式：使用钩子函数 shouldComponentUpdate(nextProps, nextState)<ul>
<li>在这个函数中，nextProps和nextState是最新的状态以及属性</li>
</ul>
</li>
<li>作用：这个函数有返回值，如果返回true，代表需要重新渲染，如果返回false，代表不需要重新渲染</li>
<li>触发时机：更新阶段的钩子函数，组件重新渲染前执行(shouldComponentUpdate =&gt; render)</li>
</ul>
<p><img src="images/shouldComponentUpdata.png"></p>
<h4 id="随机数案例"><a href="#随机数案例" class="headerlink" title="随机数案例"></a>随机数案例</h4><p>需求：随机生成数字，显示在页面，如果生成的数字与当前显示的数字相同，那么就不需要更新UI，反之更新UI。</p>
<p>利用nextState参数来判断当前组件是否需要更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        number: 0</span><br><span class="line">    &#125;</span><br><span class="line">    // 点击事件，每次点击生成一个随机数</span><br><span class="line">    hanldeBtn = () =&gt; &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            number: Math.floor(Math.random() * 3)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    // 将要更新UI的时候会执行这个钩子函数</span><br><span class="line">    shouldComponentUpdate(nextProps,nextState) &#123;</span><br><span class="line">         // 判断一下当前生成的 值是否与页面的值相等</span><br><span class="line">         if(nextState.number !== this.state.number)&#123;</span><br><span class="line">             return true</span><br><span class="line">         &#125;</span><br><span class="line">         return false</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                随机数：&#123;this.state.number&#125; &lt;br /&gt;</span><br><span class="line">                &lt;button onClick=&#123;this.hanldeBtn&#125;&gt;生成随机数&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>利用props参数来判断是否需要进行更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        number: 0</span><br><span class="line">    &#125;</span><br><span class="line">    // 点击事件，每次点击生成一个随机数</span><br><span class="line">    hanldeBtn = () =&gt; &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            number: Math.floor(Math.random() * 3)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;NumberBox number=&#123;this.state.number&#125; /&gt;</span><br><span class="line">                &lt;button onClick=&#123;this.hanldeBtn&#125;&gt;生成随机数&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class NumberBox extends React.Component &#123;</span><br><span class="line">    // 将要更新UI的时候会执行这个钩子函数</span><br><span class="line">    shouldComponentUpdate(nextProps, nextState) &#123;</span><br><span class="line">        // 判断一下当前生成的 值是否与页面的值相等</span><br><span class="line">        if (nextProps.number !== this.props.number) &#123;</span><br><span class="line">            return true</span><br><span class="line">        &#125;</span><br><span class="line">        return false</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;h1&gt;随机数：&#123;this.props.number&#125; &lt;/h1&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="纯组件"><a href="#纯组件" class="headerlink" title="纯组件"></a>纯组件</h3><h4 id="作用以及使用"><a href="#作用以及使用" class="headerlink" title="作用以及使用"></a>作用以及使用</h4><ul>
<li>纯组件： PureComponent 与 React.Component 功能相似</li>
<li>区别： PureComponent 内部自动实现了 shouldComponentUpdate钩子，不需要手动比较</li>
<li>原理：纯组件内部通过分别比对前后两次 props和state的值，来决定是否重新渲染组件</li>
</ul>
<p><img src="images/PureComponent.png"></p>
<h4 id="实现原理"><a href="#实现原理" class="headerlink" title="实现原理"></a>实现原理</h4><ul>
<li>说明：纯组件内部的对比是 shallow compare（浅层对比）</li>
<li>对于值类型来说：比较两个值是否相同</li>
</ul>
<p><img src="images/%E5%80%BC%E7%B1%BB%E5%9E%8B%E6%AF%94%E5%AF%B9.png"></p>
<ul>
<li>引用类型：只比对对象的引用地址是否相同</li>
</ul>
<p><img src="images/%E5%BC%95%E7%94%A8%E7%B1%BB%E5%9E%8B%E6%AF%94%E5%AF%B9.png"></p>
<ul>
<li>注意：state 或 props 中属性值为引用类型时，应该创建新数据，不要直接修改原数据</li>
</ul>
<p><img src="images/%E6%B3%A8%E6%84%8F%E7%82%B9.png"></p>
<h2 id="虚拟DOM和Diff算法"><a href="#虚拟DOM和Diff算法" class="headerlink" title="虚拟DOM和Diff算法"></a>虚拟DOM和Diff算法</h2><ul>
<li>React更新视图的思想是：只要state变化就重新渲染视图</li>
<li>特点：思路非常清晰</li>
<li>问题：组件中只有一个DOM元素需要更新时，也得把整个组件的内容重新渲染吗？ 不是这样的</li>
<li>理想状态：部分更新，只更新变化的地方</li>
<li>React运用的核心点就是 虚拟DOM 配合 Diff 算法</li>
</ul>
<h3 id="虚拟DOM"><a href="#虚拟DOM" class="headerlink" title="虚拟DOM"></a>虚拟DOM</h3><p>本质上就是一个JS对象，用来描述你希望在屏幕上看到的内容</p>
<p><img src="images/%E8%99%9A%E6%8B%9FDOM.png"></p>
<h3 id="Diff算法"><a href="#Diff算法" class="headerlink" title="Diff算法"></a>Diff算法</h3><p>执行过程</p>
<ul>
<li>初次渲染时，React会根据初始化的state（model），创建一个虚拟DOM对象（树）</li>
<li>根据虚拟DOM生成真正的DOM，渲染到页面</li>
<li>当数据变化后(setState())，会重新根据新的数据，创建新的虚拟DOM对象（树）</li>
<li>与上一次得到的虚拟DOM对象，使用Diff算法比对（找不同），得到需要更新的内容</li>
<li>最终，React只将变化的内容更新（patch）到DOM中，重新渲染到页面</li>
</ul>
<p><img src="images/diff%E7%AE%97%E6%B3%95.png"></p>
<h3 id="代码演示"><a href="#代码演示" class="headerlink" title="代码演示"></a>代码演示</h3><ul>
<li>组件render()调用后，根据状态和JSX结构生成虚拟DOM对象(render()方法的调用并不意味着浏览器进行渲染，render方法调用时意味着Diff算法开始比对了)</li>
<li>示例中，只更新p元素的文本节点内容</li>
<li>初次渲染的DOM对象</li>
</ul>
<p><img src="images/%E5%88%9D%E6%AC%A1%E7%9A%84%E8%99%9A%E6%8B%9FDOM%E5%AF%B9%E8%B1%A1.png"></p>
<ul>
<li>数据更新之后的虚拟DOM对象</li>
</ul>
<p><img src="images/%E6%9B%B4%E6%96%B0%E5%90%8E%E7%9A%84%E8%99%9A%E6%8B%9FDOM%E5%AF%B9%E8%B1%A1.png"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul>
<li>工作角度：应用第一，原理第二</li>
<li>原理有助于更好的理解React的自身运行机制</li>
<li>setState() 异步更新数据</li>
<li>父组件更新导致子组件更新，纯组件提升性能</li>
<li>思路清晰简单为前提，虚拟DOM和Diff保效率（渲染变化的组件）</li>
<li>虚拟DOM -&gt; state + JSX</li>
<li>虚拟DOM最大的特点是 脱离了浏览器的束缚，也就是意味着只要是能支持js的地方都可以用到react，所以为什么说react是可以进行跨平台的开发</li>
</ul>
<h1 id="React路由基础"><a href="#React路由基础" class="headerlink" title="React路由基础"></a>React路由基础</h1><h2 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够说出React路由的作用</li>
<li>能够掌握-react-router-dom的基本使用</li>
<li>能够使用编程式导航跳转路由</li>
<li>能够知道React路由的匹配模式</li>
</ul>
<h2 id="React路由介绍"><a href="#React路由介绍" class="headerlink" title="React路由介绍"></a>React路由介绍</h2><p>现代的前端应用大多数是SPA（单页应用程序），也就是只有一个HTML页面的应用程序。因为它的用户体验更好、对服务器压力更小，所以更受欢迎。为了有效的使用单个页面来管理多页面的功能，前端路由应运而生。</p>
<ul>
<li>前端路由功能：让用户从一个视图（页面）导航到另一个视图（页面）</li>
<li>前端路由是一套映射规则，在React中，是URL路径与组件的对应关系</li>
<li>使用React路由简单来说，就是配置路径和组件</li>
</ul>
<h2 id="路由的基本使用"><a href="#路由的基本使用" class="headerlink" title="路由的基本使用"></a>路由的基本使用</h2><h3 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h3><ul>
<li><p>安装： yarn add react-router-dom</p>
<ul>
<li>如果没有安装yarn工具的，需要先全局安装一下yarn：npm install -g yarn</li>
</ul>
</li>
<li><p>导入路由的三个核心组件： Router / Route / Link</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import &#123;BrowserRouter as Router, Route, Link&#125; from &#x27;react-router-dom&#x27;</span><br></pre></td></tr></table></figure></li>
<li><p>使用Router 组件包裹整个应用</p>
</li>
</ul>
<p><img src="images/Router.png"></p>
<ul>
<li>使用Link组件作为导航菜单（路由入口）</li>
</ul>
<p><img src="images/link%E5%85%A5%E5%8F%A3.png"></p>
<ul>
<li>使用Route组件配置路由规则和要展示的组件（路由出口）</li>
</ul>
<p><img src="images/route.png"></p>
<h3 id="常用组件说明"><a href="#常用组件说明" class="headerlink" title="常用组件说明"></a>常用组件说明</h3><ul>
<li><strong>Router组件：</strong>包裹整个应用，一个React应用只需要使用一次<ul>
<li>两种常用的Router： HashRouter和BrowserRouter</li>
<li>HashRouter： 使用URL的哈希值实现 （localhost:3000/#/first）</li>
<li>推荐 BrowserRouter：使用H5的history API实现（localhost3000/first）</li>
</ul>
</li>
<li><strong>Link组件：</strong>用于指定导航链接（a标签）<ul>
<li>最终Link会编译成a标签，而to属性会被编译成 a标签的href属性</li>
</ul>
</li>
<li><strong>Route组件：</strong>指定路由展示组件相关信息<ul>
<li>path属性：路由规则，这里需要跟Link组件里面to属性的值一致</li>
<li>component属性：展示的组件</li>
<li>Route写在哪，渲染出来的组件就在哪</li>
</ul>
</li>
</ul>
<h3 id="路由的执行过程"><a href="#路由的执行过程" class="headerlink" title="路由的执行过程"></a>路由的执行过程</h3><ul>
<li>当我们点击Link组件的时候，修改了浏览器地址栏中的url</li>
<li>React路由监听地址栏url的变化</li>
<li>React路由内部遍历所有的Route组件，拿着Route里面path规则与pathname进行匹配</li>
</ul>
<p><img src="images/route%E5%8C%B9%E9%85%8D.png"></p>
<ul>
<li>当路由规则（path）能够匹配地址栏中的pathname时，就展示该Route组件的内容</li>
</ul>
<h3 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h3><ul>
<li><strong>场景：</strong>点击登陆按钮，登陆成功后，通过代码跳转到后台首页，如何实现？</li>
<li><strong>编程式导航：</strong>通过JS代码来实现页面跳转</li>
<li>history是React路由提供的，用于获取浏览器历史记录的相关信息</li>
<li><strong>push(path)：</strong>跳转到某个页面，参数path表示要跳转的路径</li>
<li>go(n)：前进或后退功能，参数n表示前进或后退页面数量</li>
</ul>
<p><img src="images/%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA.png"></p>
<h3 id="默认路由"><a href="#默认路由" class="headerlink" title="默认路由"></a>默认路由</h3><ul>
<li>现在的路由都是通过点击导航菜单后展示的，如果进入页面的时候就主动触发路由呢</li>
<li>默认路由：表示进入页面时就会匹配的路由</li>
<li>默认路由：只需要把path设置为 <code>&#39;/&#39;</code></li>
</ul>
<p><img src="images/%E9%BB%98%E8%AE%A4%E8%B7%AF%E7%94%B1.png"></p>
<h3 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h3><h4 id="模糊匹配模式"><a href="#模糊匹配模式" class="headerlink" title="模糊匹配模式"></a>模糊匹配模式</h4><ul>
<li>当Link组件的to属性值为 ‘/login’ 时候，为什么默认路由也被匹配成功？</li>
<li>默认情况下，React路由是模糊匹配模式</li>
<li>模糊匹配规则：只要pathname以path开头就会匹配成功</li>
</ul>
<p><img src="images/%E6%A8%A1%E7%B3%8A%E5%8C%B9%E9%85%8D%E6%A8%A1%E5%BC%8F.png"></p>
<h4 id="精准匹配"><a href="#精准匹配" class="headerlink" title="精准匹配"></a>精准匹配</h4><ul>
<li>默认路由认可情况下都会展示，如果避免这种问题？</li>
<li>给Route组件添加exact属性，让其变为<strong>精准匹配模式</strong></li>
<li>精确匹配：只有当path和pathname完全匹配时才会展示改路由</li>
</ul>
<p><img src="images/%E7%B2%BE%E7%A1%AE%E5%8C%B9%E9%85%8D.png"></p>
<h3 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h3><ul>
<li>React路由可以有效的管理多个视图实现 SPA</li>
<li>路由先需要通过安装</li>
<li>Router组件包裹整个应用，只需要使用一次</li>
<li>Link组件是入口，Route组件是出口</li>
<li>通过props.history实现编程式导航</li>
<li>默认是模糊匹配，添加exact编程精确匹配</li>
<li>React路由的一切都是组件，可以像思考组件一样思考路由</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-react基础Day05-redux"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day05-redux/"
    >Day5 Redux</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day05-redux/" class="article-date">
  <time datetime="2022-01-17T13:26:31.000Z" itemprop="datePublished">2022-01-17</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="redux、react-redux"><a href="#redux、react-redux" class="headerlink" title="redux、react-redux"></a>redux、react-redux</h1><h2 id="一、为什么需要使用redux"><a href="#一、为什么需要使用redux" class="headerlink" title="一、为什么需要使用redux"></a>一、为什么需要使用redux</h2><p>两个组件(非父子关系)之间需要通信的话，可能需要多个中间组件为他们进行消息传递，这样既浪费了资源，代码也会比较复杂。</p>
<p>​    <img src="./images/1.jpg"></p>
<h2 id="二、redux数据流"><a href="#二、redux数据流" class="headerlink" title="二、redux数据流"></a>二、redux数据流</h2><p>  ​    <img src="./images/redux1.jpg"></p>
<h2 id="三、redux-基本使用"><a href="#三、redux-基本使用" class="headerlink" title="三、redux 基本使用"></a>三、redux 基本使用</h2><ol>
<li>安装redux依赖包 </li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yarn add redux -S  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>新建文件 src/store/index.js </li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> createStore(</span><br><span class="line">  reducer, </span><br><span class="line">  <span class="comment">// 设置调试工具</span></span><br><span class="line">  <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION__()</span><br><span class="line">)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>新建文件 src/store/reducer.js  </li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> defaultState = &#123;</span><br><span class="line">  <span class="attr">count</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (state = defaultState, action) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> state</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>在App.js中关联state和store的数据，并监听数据的变化同步数据</li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">super</span>()</span><br><span class="line">  <span class="comment">// 通过store.getState 调用store的数据 </span></span><br><span class="line">  <span class="built_in">this</span>.state = store.getState()</span><br><span class="line">  store.subscribe(<span class="built_in">this</span>.handleStoreChange)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handleStoreChange = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.setState(store.getState())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="四、react-redux-的基本使用"><a href="#四、react-redux-的基本使用" class="headerlink" title="四、react-redux 的基本使用"></a>四、react-redux 的基本使用</h2><ol>
<li>安装依赖包  </li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yarn add react-redux -S  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在index.js 文件中进行修饰</li>
</ol>
 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; Provider &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"></span><br><span class="line">ReactDOM.render(</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">Provider</span> <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">,</span><br><span class="line"><span class="built_in">document</span>.getElementById(<span class="string">&#x27;root&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在需要使用store的组件中通过高阶组件获取state 和 dispatch</li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const mapStateToProps = (state) =&gt; &#123;</span></span><br><span class="line"><span class="string">  return &#123;</span></span><br><span class="line"><span class="string">    count: state.count</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">const mapDispatchToProps = (dispatch) =&gt; &#123;</span></span><br><span class="line"><span class="string">  return &#123;</span></span><br><span class="line"><span class="string">    handleAddCount() &#123;</span></span><br><span class="line"><span class="string">      dispatch(addCount())</span></span><br><span class="line"><span class="string">    &#125;,</span></span><br><span class="line"><span class="string">    handleSubCount() &#123;</span></span><br><span class="line"><span class="string">      dispatch(subCount())</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">mapStates  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mapMutations </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mapGetters  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">mapActions  </span></span><br><span class="line"><span class="string">export default connect(mapStateToProps, mapDispatchToProps)(App)</span></span><br></pre></td></tr></table></figure>


<h2 id="五、redux异步请求"><a href="#五、redux异步请求" class="headerlink" title="五、redux异步请求"></a>五、redux异步请求</h2><ol>
<li>安装redux-thunk</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yarn add redux-thunk -S </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改主入口配置</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; createStore, applyMiddleware, compose &#125; <span class="keyword">from</span> <span class="string">&#x27;redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> reducer <span class="keyword">from</span> <span class="string">&#x27;./reducer&#x27;</span></span><br><span class="line"><span class="keyword">import</span> thunk <span class="keyword">from</span> <span class="string">&#x27;redux-thunk&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// export default createStore(</span></span><br><span class="line"><span class="comment">//   reducer,</span></span><br><span class="line"><span class="comment">//   applyMiddleware(thunk),</span></span><br><span class="line"><span class="comment">//   window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()</span></span><br><span class="line"><span class="comment">// )</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> composeEnhancers =</span><br><span class="line">  <span class="keyword">typeof</span> <span class="built_in">window</span> === <span class="string">&#x27;object&#x27;</span> &amp;&amp;</span><br><span class="line">    <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ ?</span><br><span class="line">    <span class="built_in">window</span>.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;) : compose;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> enhancer = composeEnhancers(</span><br><span class="line">  applyMiddleware(thunk),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(</span><br><span class="line">  reducer,<span class="comment">//构建初始的数据</span></span><br><span class="line">  enhancer</span><br><span class="line">)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在actions.js中发送异步请求</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ADD_COUNT &#125; <span class="keyword">from</span> <span class="string">&#x27;./types&#x27;</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> addCountAction = <span class="function">(<span class="params">value</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">type</span>: ADD_COUNT,</span><br><span class="line">    value</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">   </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> getTodos = <span class="function">(<span class="params">number</span>) =&gt;</span> <span class="function"><span class="params">dispatch</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(number)</span><br><span class="line">  axios</span><br><span class="line">    .get(<span class="string">&#x27;http://jsonplaceholder.typicode.com/todos&#x27;</span>)</span><br><span class="line">    .then(<span class="function"><span class="params">todos</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 把actions 发送给 reducer   </span></span><br><span class="line">      dispatch(addCountAction(todos))</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-react基础Day03-生命周期&amp;render props模式&amp;高阶组件&amp;原理揭秘"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day03-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F&render%20props%E6%A8%A1%E5%BC%8F&%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6&%E5%8E%9F%E7%90%86%E6%8F%AD%E7%A7%98/"
    >Day3 生命周期&amp;render props模式&amp;高阶组件&amp;原理揭秘</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day03-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F&render%20props%E6%A8%A1%E5%BC%8F&%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6&%E5%8E%9F%E7%90%86%E6%8F%AD%E7%A7%98/" class="article-date">
  <time datetime="2022-01-17T13:25:31.000Z" itemprop="datePublished">2022-01-17</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="组件生命周期（★★★）"><a href="#组件生命周期（★★★）" class="headerlink" title="组件生命周期（★★★）"></a>组件生命周期（★★★）</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>说出组件生命周期对应的钩子函数</li>
<li>钩子函数调用的时机</li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>意义：组件的生命周期有助于理解组件的运行方式，完成更复杂的组件功能、分析组件错误原因等</p>
<p>组件的生命周期： 组件从被创建到挂载到页面中运行，再到组件不在时卸载的过程</p>
<p>生命周期的每个阶段总是伴随着一些方法调用，这些方法就是生命周期的钩子函数</p>
<p>构造函数的作用：为开发人员在不同阶段操作组件提供了实际</p>
<h2 id="生命周期阶段"><a href="#生命周期阶段" class="headerlink" title="生命周期阶段"></a>生命周期阶段</h2><p><img src="images/%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png"></p>
<h3 id="创建时（挂载阶段）"><a href="#创建时（挂载阶段）" class="headerlink" title="创建时（挂载阶段）"></a>创建时（挂载阶段）</h3><ul>
<li>执行时机：组件创建时（页面加载时）</li>
<li>执行顺序</li>
</ul>
<p><img src="images/%E5%88%9B%E5%BB%BA%E6%97%B6-%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.png"></p>
<p><img src="images/%E5%88%9B%E5%BB%BA%E6%97%B6-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%9C%E7%94%A8.png"></p>
<h3 id="更新时"><a href="#更新时" class="headerlink" title="更新时"></a>更新时</h3><p>执行时机：<code>setState()、 forceUpdate()、 组件接收到新的props</code></p>
<p>说明：以上三者任意一种变化，组件就会重新渲染</p>
<p>执行顺序：</p>
<p><img src="images/%E6%9B%B4%E6%96%B0%E6%97%B6.png"></p>
<p><img src="images/%E6%9B%B4%E6%96%B0%E6%97%B6-%E5%87%BD%E6%95%B0%E4%BD%9C%E7%94%A8.png"></p>
<h3 id="卸载时"><a href="#卸载时" class="headerlink" title="卸载时"></a>卸载时</h3><p>执行时机：组件从页面中消失</p>
<p>作用：用来做清理操作</p>
<p><img src="images/%E5%8D%B8%E8%BD%BD%E6%97%B6.png"></p>
<h3 id="不常用的钩子函数"><a href="#不常用的钩子函数" class="headerlink" title="不常用的钩子函数"></a>不常用的钩子函数</h3><h4 id="旧版的生命周期钩子函数"><a href="#旧版的生命周期钩子函数" class="headerlink" title="旧版的生命周期钩子函数"></a>旧版的生命周期钩子函数</h4><p><img src="images/%E6%97%A7%E7%89%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0.png"></p>
<h4 id="新版完整生命会走棋钩子函数"><a href="#新版完整生命会走棋钩子函数" class="headerlink" title="新版完整生命会走棋钩子函数"></a>新版完整生命会走棋钩子函数</h4><p><img src="images/%E6%96%B0%E7%89%88%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0.png"></p>
<h5 id="getDerivedStateFromProps"><a href="#getDerivedStateFromProps" class="headerlink" title="getDerivedStateFromProps()"></a><code>getDerivedStateFromProps()</code></h5><ul>
<li><strong><code>getDerivedStateFromProps</code></strong> 会在调用 render 方法之前调用，并且在初始挂载及后续更新时都会被调用。它应返回一个对象来更新 state，如果返回 null 则不更新任何内容</li>
<li>不管原因是什么，都会在<em>每次</em>渲染前触发此方法</li>
</ul>
<h5 id="shouldComponentUpdate"><a href="#shouldComponentUpdate" class="headerlink" title="shouldComponentUpdate()"></a><code>shouldComponentUpdate()</code></h5><ul>
<li>根据 <strong><code>shouldComponentUpdate()</code></strong> 的返回值，判断 React 组件的输出是否受当前 state 或 props 更改的影响。默认行为是 state 每次发生变化组件都会重新渲染</li>
<li>当 props 或 state 发生变化时，**<code>shouldComponentUpdate()</code>** 会在渲染执行之前被调用。返回值默认为 true</li>
</ul>
<h5 id="getSnapshotBeforeUpdate"><a href="#getSnapshotBeforeUpdate" class="headerlink" title="getSnapshotBeforeUpdate()"></a><code>getSnapshotBeforeUpdate()</code></h5><ul>
<li><strong><code>getSnapshotBeforeUpdate()</code></strong> 在最近一次渲染输出（提交到 DOM 节点）之前调用。它使得组件能在发生更改之前从 DOM 中捕获一些信息（例如，滚动位置）。此生命周期的任何返回值将作为参数传递给 <strong><code>componentDidUpdate()</code></strong></li>
<li>此用法并不常见，但它可能出现在 UI 处理中，如需要以特殊方式处理滚动位置的聊天线程等</li>
</ul>
<h1 id="render-props模式-（★★★）"><a href="#render-props模式-（★★★）" class="headerlink" title="render-props模式 （★★★）"></a>render-props模式 （★★★）</h1><h2 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h2><ul>
<li>知道render-props模式有什么作用</li>
<li>能够说出render-props的使用步骤</li>
</ul>
<h2 id="React组件复用概述"><a href="#React组件复用概述" class="headerlink" title="React组件复用概述"></a>React组件复用概述</h2><ul>
<li>思考：如果两个组件中的部分功能相似或相同，该如何处理？</li>
<li>处理方式：复用相似的功能</li>
<li>复用什么？<ul>
<li>state</li>
<li>操作state的方法</li>
</ul>
</li>
<li>两种方式：<ul>
<li>render props模式</li>
<li>高阶组件（HOC）</li>
</ul>
</li>
<li>注意： 这两种方式不是新的API，而是利用React自身特点的编码技巧，演化而成的固定模式</li>
</ul>
<h2 id="思路分析"><a href="#思路分析" class="headerlink" title="思路分析"></a>思路分析</h2><ul>
<li><p>思路：将要复用的state和操作state的方法封装到一个组件中</p>
</li>
<li><p>如何拿到该组件中复用的state</p>
<ul>
<li><p>在使用组件时，添加一个值为函数的prop，通过函数参数来获取</p>
<p><img src="images/render-props-01.png"></p>
</li>
</ul>
</li>
<li><p>如何渲染到任意的UI</p>
<ul>
<li><p>使用该函数的返回值作为要渲染的UI内容</p>
<p><img src="images/render-props-02.png"></p>
</li>
</ul>
</li>
</ul>
<h2 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h2><ul>
<li>创建Mouse组件，在组件中提供复用的逻辑代码</li>
<li>将要复用的状态作为 props.render(state)方法的参数，暴露到组件外部</li>
<li>使用props.render() 的返回值作为要渲染的内容</li>
</ul>
<p><img src="images/render-props%E6%A8%A1%E5%BC%8F-01.png"></p>
<h4 id="示例demo"><a href="#示例demo" class="headerlink" title="示例demo"></a>示例demo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">class Mouse extends React.Component &#123;</span><br><span class="line">    // 鼠标位置状态</span><br><span class="line">    state = &#123;</span><br><span class="line">        x: 0,</span><br><span class="line">        y: 0</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 监听鼠标移动事件</span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        window.addEventListener(&#x27;mousemove&#x27;,this.handleMouseMove)</span><br><span class="line">    &#125;</span><br><span class="line">    handleMouseMove = e =&gt; &#123;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            x: e.clientX,</span><br><span class="line">            y: e.clientY</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        // 向外界提供当前子组件里面的数据</span><br><span class="line">        return this.props.render(this.state)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                App</span><br><span class="line">                &lt;Mouse render=&#123;mouse =&gt; &#123;</span><br><span class="line">                    return &lt;p&gt;X&#123;mouse.x&#125;Y&#123;mouse.y&#125;&lt;/p&gt;</span><br><span class="line">                &#125;&#125;/&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;App /&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h2 id="children代替render属性"><a href="#children代替render属性" class="headerlink" title="children代替render属性"></a>children代替render属性</h2><ul>
<li>注意：并不是该模式叫 render props就必须使用名为render的prop，实际上可以使用任意名称的prop</li>
<li>把prop是一个函数并且告诉组件要渲染什么内容的技术叫做： render props模式</li>
<li>推荐：使用childre代替render属性</li>
</ul>
<p><img src="images/render-props-children%E6%A8%A1%E5%BC%8F.png"></p>
<h2 id="优化代码"><a href="#优化代码" class="headerlink" title="优化代码"></a>优化代码</h2><ul>
<li>推荐给render props模式添加props校验</li>
</ul>
<p><img src="images/%E4%BC%98%E5%8C%96-%E6%B7%BB%E5%8A%A0%E6%A0%A1%E9%AA%8C.png"></p>
<ul>
<li></li>
</ul>
<p><img src="images/%E4%BC%98%E5%8C%96-%E7%A7%BB%E9%99%A4%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A.png"></p>
<h1 id="高阶组件-（★★★）"><a href="#高阶组件-（★★★）" class="headerlink" title="高阶组件 （★★★）"></a>高阶组件 （★★★）</h1><h2 id="目标-2"><a href="#目标-2" class="headerlink" title="目标"></a>目标</h2><ul>
<li>知道高阶组件的作用</li>
<li>能够说出高阶的使用步骤</li>
</ul>
<h2 id="概述-1"><a href="#概述-1" class="headerlink" title="概述"></a>概述</h2><ul>
<li>目的：实现状态逻辑复用</li>
<li>采用 包装模式</li>
<li>手机：获取保护功能</li>
<li>手机壳：提供保护功能</li>
<li>高阶组件就相当于手机壳，通过包装组件，增强组件功能</li>
</ul>
<p><img src="images/%E6%89%8B%E6%9C%BA%E5%A3%B3.png"></p>
<h2 id="思路分析-1"><a href="#思路分析-1" class="headerlink" title="思路分析"></a>思路分析</h2><ul>
<li>高阶组件(HOC、Higher-Order Component) 是一个函数，接收要包装的组件，返回增强后的组件</li>
</ul>
<p><img src="images/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-%E5%87%BD%E6%95%B0.png"></p>
<ul>
<li>高阶组件内部创建了一个类组件，在这个类组件中提供复用的状态逻辑代码，通过prop将复用的状态传递给被包装组件<code>WrappedComponent</code></li>
</ul>
<p><img src="images/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-%E7%B1%BB%E7%BB%84%E4%BB%B6%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0.png"></p>
<h2 id="使用步骤-1"><a href="#使用步骤-1" class="headerlink" title="使用步骤"></a>使用步骤</h2><ul>
<li>创建一个函数，名称约定以with开头</li>
<li>指定函数参数，参数应该以大写字母开头</li>
<li>在函数内部创建一个类组件，提供复用的状态逻辑代码，并返回</li>
<li>在该组件中，渲染参数组件，同时将状态通过prop传递给参数组件</li>
<li>调用该高阶组件，传入要增强的组件，通过返回值拿到增强后的组件，并将其渲染到页面</li>
</ul>
<p><strong>包装函数</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// 定义一个函数，在函数内部创建一个相应类组件</span><br><span class="line">function withMouse(WrappedComponent) &#123;</span><br><span class="line">    // 该组件提供复用状态逻辑</span><br><span class="line">    class Mouse extends React.Component &#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            x: 0,</span><br><span class="line">            y: 0</span><br><span class="line">        &#125;</span><br><span class="line">        // 事件的处理函数</span><br><span class="line">        handleMouseMove = (e) =&gt; &#123;</span><br><span class="line">            this.setState(&#123;</span><br><span class="line">                x: e.clientX,</span><br><span class="line">                y: e.clientY</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        // 当组件挂载的时候进行事件绑定</span><br><span class="line">        componentDidMount() &#123;</span><br><span class="line">            window.addEventListener(&#x27;mousemove&#x27;, this.handleMouseMove)</span><br><span class="line">        &#125;</span><br><span class="line">        // 当组件移除时候解绑事件</span><br><span class="line">        componentWillUnmount() &#123;</span><br><span class="line">            window.removeEventListener(&#x27;mousemove&#x27;, this.handleMouseMove)</span><br><span class="line">        &#125;</span><br><span class="line">        render() &#123;</span><br><span class="line">            // 在render函数里面返回传递过来的组件，把当前组件的状态设置进去</span><br><span class="line">            return &lt;WrappedComponent &#123;...this.state&#125; /&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return Mouse</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>哪个组件需要加强，通过调用<code>withMouse</code>这个函数，然后把返回的值设置到父组件中即可</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">function Position(props) &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;p&gt;</span><br><span class="line">            X:&#123;props.x&#125;</span><br><span class="line">            Y:&#123;props.y&#125;</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">// 把position 组件来进行包装</span><br><span class="line">let MousePosition = withMouse(Position)</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                高阶组件</span><br><span class="line">                &lt;MousePosition&gt;&lt;/MousePosition&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="设置displayName"><a href="#设置displayName" class="headerlink" title="设置displayName"></a>设置<code>displayName</code></h2><ul>
<li>使用高阶组件存在的问题：得到两个组件的名称相同</li>
<li>原因：默认情况下，React使用组件名称作为<code>displayName</code></li>
<li>解决方式：为高阶组件设置<code>displayName</code>，便于调试时区分不同的组件</li>
<li><code>displayName的作用：用于设置调试信息(React Developer Tools信息)</code></li>
<li>设置方式：</li>
</ul>
<p><img src="images/%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6-displayName.png"></p>
<h2 id="传递props"><a href="#传递props" class="headerlink" title="传递props"></a>传递props</h2><ul>
<li>问题：如果没有传递props，会导致props丢失问题</li>
<li>解决方式： 渲染<code>WrappedComponent</code>时，将state和props一起传递给组件</li>
</ul>
<p><img src="images/%E4%BC%A0%E9%80%92props.png"></p>
<h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul>
<li>组件通讯是构建React应用必不可少的一环</li>
<li>props的灵活性让组件更加强大</li>
<li>状态提升是React组件的常用模式</li>
<li>组件生命周期有助于理解组件的运行过程</li>
<li>钩子函数让开发者可以在特定的时机执行某些功能</li>
<li><code>render props</code> 模式和高阶组件都可以实现组件状态逻辑的复用</li>
<li>组件极简模型： <code>(state,props) =&gt; UI</code></li>
</ul>
<h1 id="React原理"><a href="#React原理" class="headerlink" title="React原理"></a>React原理</h1><h2 id="目标-3"><a href="#目标-3" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够知道<code>setState()</code>更新数据是异步的</li>
<li>能够知道JSX语法的转化过程</li>
</ul>
<h2 id="setState-说明-（★★★）"><a href="#setState-说明-（★★★）" class="headerlink" title="setState()说明 （★★★）"></a><code>setState()</code>说明 （★★★）</h2><h3 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h3><ul>
<li><code>setState()</code>更新数据是异步的</li>
<li>注意：使用该语法，后面的<code>setState</code>不要依赖前面<code>setState</code>的值</li>
<li>多次调用<code>setState</code>，只会触发一次render</li>
</ul>
<h3 id="推荐语法"><a href="#推荐语法" class="headerlink" title="推荐语法"></a>推荐语法</h3><ul>
<li>推荐：使用 <code>setState((state,props) =&gt; &#123;&#125;)</code> 语法</li>
<li>参数state： 表示最新的state</li>
<li>参数props： 表示最新的props</li>
</ul>
<p><img src="images/%E6%8E%A8%E8%8D%90%E8%AF%AD%E6%B3%95.png"></p>
<h3 id="第二个参数"><a href="#第二个参数" class="headerlink" title="第二个参数"></a>第二个参数</h3><ul>
<li>场景：在状态更新(页面完成重新渲染)后立即执行某个操作</li>
<li>语法：<code>setState(update[,callback])</code></li>
</ul>
<p><img src="images/%E7%AC%AC%E4%BA%8C%E4%B8%AA%E5%8F%82%E6%95%B0.png"></p>
<h2 id="JSX语法的转化过程-（★★★）"><a href="#JSX语法的转化过程-（★★★）" class="headerlink" title="JSX语法的转化过程 （★★★）"></a>JSX语法的转化过程 （★★★）</h2><ul>
<li>JSX仅仅是<code>createElement()</code> 方法的语法糖(简化语法)</li>
<li>JSX语法被 @babel/preset-react 插件编译为<code>createElement()</code> 方法</li>
<li>React 元素： 是一个对象，用来描述你希望在屏幕上看到的内容</li>
</ul>
<p><img src="images/%E8%AF%AD%E6%B3%95%E7%B3%96.png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-react基础Day02-受控组件&amp;评论案例&amp;props&amp;context"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day02-%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6&%E8%AF%84%E8%AE%BA%E6%A1%88%E4%BE%8B&props&context/"
    >Day2 受控组件&amp;评论案例&amp;props&amp;context</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day02-%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6&%E8%AF%84%E8%AE%BA%E6%A1%88%E4%BE%8B&props&context/" class="article-date">
  <time datetime="2022-01-17T13:24:31.000Z" itemprop="datePublished">2022-01-17</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="React组件"><a href="#React组件" class="headerlink" title="React组件"></a>React组件</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够知道受控组件是什么</li>
<li>能够写出受控组件</li>
<li>了解非受控组件</li>
</ul>
<h2 id="表单处理"><a href="#表单处理" class="headerlink" title="表单处理"></a>表单处理</h2><h3 id="受控组件（★★★）"><a href="#受控组件（★★★）" class="headerlink" title="受控组件（★★★）"></a>受控组件（★★★）</h3><ul>
<li>HTML中的表单元素是可输入的，也就是有自己的可变状态</li>
<li>而React中可变状态通常保存在state中，并且只能通过<code>setState()</code> 方法来修改</li>
<li>React讲state与表单元素值value绑定在一起，有state的值来控制表单元素的值</li>
<li>受控组件：值受到react控制的表单元素</li>
</ul>
<p><img src="images/%E5%8F%97%E6%8E%A7%E7%BB%84%E4%BB%B6.png"></p>
<h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><ul>
<li>在state中添加一个状态，作为表单元素的value值</li>
<li>给表单元素绑定change事件，将表单元素的值设置为state的值</li>
</ul>
<h4 id="示例demo"><a href="#示例demo" class="headerlink" title="示例demo"></a>示例demo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component &#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super()</span><br><span class="line">        this.inputChange = this.inputChange.bind(this)</span><br><span class="line">    &#125;</span><br><span class="line">    state = &#123;</span><br><span class="line">        txt : &#x27;&#x27;</span><br><span class="line">    &#125;</span><br><span class="line">    inputChange(e)&#123;</span><br><span class="line">       this.setState(&#123;</span><br><span class="line">           txt: e.target.value</span><br><span class="line">       &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        console.log(this.state);</span><br><span class="line">        </span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &#123;/* 把state的值设置给输入框的value，绑定change事件，这样用户在输入内容的时候调用相应函数，在函数里面把当前设置的值赋值给state，从而达到数据的统一 */&#125;</span><br><span class="line">                &lt;input type=&quot;text&quot; value=&#123;this.state.txt&#125; onChange=&#123;this.inputChange&#125;/&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">ReactDOM.render(&lt;App /&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h4 id="多表单元素优化"><a href="#多表单元素优化" class="headerlink" title="多表单元素优化"></a>多表单元素优化</h4><ul>
<li>问题：每个表单元素都有一个单独的事件处理函数，这样太繁琐</li>
<li>优化：使用一个事件处理程序同时处理多个表单元素</li>
</ul>
<h5 id="步骤"><a href="#步骤" class="headerlink" title="步骤"></a>步骤</h5><ul>
<li>给表单元素添加name属性（用来区分是哪一个表单），名称与state相同（用来更新数据的）</li>
<li>根据表单内容来获取对应值</li>
<li>在change事件处理程序中通过 [name] 来修改对应的state</li>
</ul>
<h5 id="示例demo-1"><a href="#示例demo-1" class="headerlink" title="示例demo"></a>示例demo</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">inputChange(e)&#123;</span><br><span class="line">   let target = e.target;</span><br><span class="line">   let value = target.type == &#x27;checkbox&#x27; ? target.checked : target.value;</span><br><span class="line">   this.setState(&#123;</span><br><span class="line">       [e.target.name]: value</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br><span class="line">&lt;input type=&quot;text&quot; value=&#123;this.state.txt&#125; name=&quot;txt&quot; onChange=&#123;this.inputChange&#125;/&gt;</span><br><span class="line">&lt;input type=&quot;checkbox&quot; value=&#123;this.state.isChecked&#125; name=&quot;isChecked&quot; onChange=&#123;this.inputChange&#125;/&gt;</span><br></pre></td></tr></table></figure>

<h3 id="非受控组件-（了解）"><a href="#非受控组件-（了解）" class="headerlink" title="非受控组件 （了解）"></a>非受控组件 （了解）</h3><ul>
<li>说明：借助于ref，使用元素DOM方式获取表单元素值</li>
<li>ref的作用：获取DOM或者组件</li>
</ul>
<h4 id="使用步骤-1"><a href="#使用步骤-1" class="headerlink" title="使用步骤"></a>使用步骤</h4><ul>
<li>调用 <code>React.createRef()</code> 方法创建ref对象</li>
<li>将创建好的 ref 对象添加到文本框中</li>
<li>通过ref对象获取到文本框的值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component &#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super()</span><br><span class="line">        </span><br><span class="line">        //创建 ref</span><br><span class="line">        this.txtRef = React.createRef()</span><br><span class="line">    &#125;</span><br><span class="line">    // 获取文本框的值</span><br><span class="line">    getTxt =() =&gt; &#123;</span><br><span class="line">        console.log(this.txtRef.current.value)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">          &lt;div&gt;</span><br><span class="line">            &lt;input type =&quot;text&quot; ref=&#123;this.txtRef&#125; /&gt;</span><br><span class="line">            &lt;button onClick =&#123;this.getTxt&#125;&gt;获取值&lt;/button&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="React组件综合案例（★★★）"><a href="#React组件综合案例（★★★）" class="headerlink" title="React组件综合案例（★★★）"></a>React组件综合案例（★★★）</h1><h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><ul>
<li>渲染评论列表（列表渲染）</li>
<li>没有评论数据时渲染：暂无评论（条件渲染）</li>
<li>获取评论信息，包括评论人和评论内容（受控组件）</li>
<li>发表评论，更新评论列表（<code>setState()</code>）</li>
</ul>
<p><img src="images/%E7%BB%BC%E5%90%88%E6%A1%88%E4%BE%8B.png"></p>
<h2 id="搭建评论列表的模板"><a href="#搭建评论列表的模板" class="headerlink" title="搭建评论列表的模板"></a>搭建评论列表的模板</h2><ul>
<li>结构</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;</span><br><span class="line"></span><br><span class="line">/* </span><br><span class="line">  评论列表案例</span><br><span class="line"></span><br><span class="line">  comments: [</span><br><span class="line">    &#123; id: 1, name: &#x27;jack&#x27;, content: &#x27;沙发！！！&#x27; &#125;,</span><br><span class="line">    &#123; id: 2, name: &#x27;rose&#x27;, content: &#x27;板凳~&#x27; &#125;,</span><br><span class="line">    &#123; id: 3, name: &#x27;tom&#x27;, content: &#x27;楼主好人&#x27; &#125;</span><br><span class="line">  ]</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">import &#x27;./index.css&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div className=&quot;app&quot;&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;input className=&quot;user&quot; type=&quot;text&quot; placeholder=&quot;请输入评论人&quot; /&gt;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;textarea</span><br><span class="line">            className=&quot;content&quot;</span><br><span class="line">            cols=&quot;30&quot;</span><br><span class="line">            rows=&quot;10&quot;</span><br><span class="line">            placeholder=&quot;请输入评论内容&quot;</span><br><span class="line">          /&gt;</span><br><span class="line">          &lt;br /&gt;</span><br><span class="line">          &lt;button&gt;发表评论&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">        &lt;div className=&quot;no-comment&quot;&gt;暂无评论，快去评论吧~&lt;/div&gt;</span><br><span class="line">        &lt;ul&gt;</span><br><span class="line">          &lt;li&gt;</span><br><span class="line">            &lt;h3&gt;评论人：jack&lt;/h3&gt;</span><br><span class="line">            &lt;p&gt;评论内容：沙发！！！&lt;/p&gt;</span><br><span class="line">          &lt;/li&gt;</span><br><span class="line">        &lt;/ul&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 渲染组件</span><br><span class="line">ReactDOM.render(&lt;App /&gt;, document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<ul>
<li>样式</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.app</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">300px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#999</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.user</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.content</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.no-comment</span> &#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="渲染评论列表"><a href="#渲染评论列表" class="headerlink" title="渲染评论列表"></a>渲染评论列表</h2><ul>
<li>在state中初始化评论列表数据</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">state = &#123;</span><br><span class="line">  comments: [</span><br><span class="line">    &#123; id: 1, name: &#x27;jack&#x27;, content: &#x27;沙发！！！&#x27; &#125;,</span><br><span class="line">    &#123; id: 2, name: &#x27;rose&#x27;, content: &#x27;板凳~&#x27; &#125;,</span><br><span class="line">    &#123; id: 3, name: &#x27;tom&#x27;, content: &#x27;楼主好人&#x27; &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用数组的map方法遍历state中的列表数据</li>
<li>给每一个被遍历的li元素添加key属性</li>
<li>在render方法里的ul节点下嵌入表达式</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  this.state.comments.map(item =&gt; &#123;</span><br><span class="line">    return (</span><br><span class="line">       &lt;li key=&#123;item.id&#125;&gt;</span><br><span class="line">          &lt;h3&gt;&#123;item.name&#125;&lt;/h3&gt;</span><br><span class="line">          &lt;p&gt;&#123;item.content&#125;&lt;/p&gt;</span><br><span class="line">       &lt;/li&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="渲染暂无评论"><a href="#渲染暂无评论" class="headerlink" title="渲染暂无评论"></a>渲染暂无评论</h2><ul>
<li><p>判断列表数据的长度是否为0</p>
</li>
<li><p>如果为0，则渲染暂无评论</p>
</li>
<li><p>如果不为0，那么渲染列表数据</p>
</li>
<li><p>在jsx中大量写逻辑会导致很臃肿，所以我们可以把条件渲染的逻辑抽取成一个函数</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * 条件渲染，这里抽取出来了，这样在结构中不会很混乱</span><br><span class="line"> */</span><br><span class="line">renderList()&#123;</span><br><span class="line">  if (this.state.comments.length === 0) &#123;</span><br><span class="line">    return (&lt;div className=&quot;no-comment&quot;&gt;暂无评论，快去评论吧~&lt;/div&gt;)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;ul&gt; &#123;</span><br><span class="line">        this.state.comments.map(item =&gt; &#123;</span><br><span class="line">          return (</span><br><span class="line">            &lt;li key=&#123;item.id&#125;&gt;</span><br><span class="line">              &lt;h3&gt;&#123;item.name&#125;&lt;/h3&gt;</span><br><span class="line">              &lt;p&gt;&#123;item.content&#125;&lt;/p&gt;</span><br><span class="line">            &lt;/li&gt;</span><br><span class="line">          )</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">      &lt;/ul&gt;</span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在render的return方法里面调用这个函数即可</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">render() &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      ...</span><br><span class="line">      &#123;/* 通过条件渲染来判断是否显示暂无评论 */&#125;</span><br><span class="line">      &#123;this.renderList()&#125;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取评论信息"><a href="#获取评论信息" class="headerlink" title="获取评论信息"></a>获取评论信息</h2><ul>
<li>通过受控组件来获取内容</li>
<li>初始化用户名和用户内容的state</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userName: &#x27;&#x27;,</span><br><span class="line">userContent: &#x27;&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>在结构中，把表单元素的value与state进行绑定，还需要绑定name属性和onChange属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;input className=&quot;user&quot; type=&quot;text&quot; placeholder=&quot;请输入评论人&quot; value=&#123;this.state.userName&#125; name=&quot;userName&quot; onChange=&#123;this.handleForm&#125;/&gt;</span><br><span class="line">&lt;br /&gt;</span><br><span class="line">&lt;textarea</span><br><span class="line">  className=&quot;content&quot;</span><br><span class="line">  cols=&quot;30&quot;</span><br><span class="line">  rows=&quot;10&quot;</span><br><span class="line">  placeholder=&quot;请输入评论内容&quot;</span><br><span class="line">  value=&#123;this.state.userContent&#125;</span><br><span class="line">  name=&quot;userContent&quot;</span><br><span class="line">  onChange=&#123;this.handleForm&#125;</span><br><span class="line">/&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>在<code>handleFrom</code>函数中利用<code>setState</code>来让数据保持一致</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">handleForm = (e) =&gt; &#123;</span><br><span class="line">   this.setState(&#123;</span><br><span class="line">     [e.target.name] : e.target.value</span><br><span class="line">   &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="发表评论"><a href="#发表评论" class="headerlink" title="发表评论"></a>发表评论</h2><ul>
<li>给按钮绑定事件</li>
<li>在事件处理程序中，通过state获取评论信息</li>
<li>将评论信息添加到state中，利用setState来更新页面</li>
<li>添加评论前需要判断用户是否输入内容</li>
<li>添加评论后，需要情况文本框用户输入的值</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">handleClick = (e) =&gt; &#123;</span><br><span class="line">  // 拿到用户输入的内容</span><br><span class="line">  let &#123;userName,userContent&#125; = this.state</span><br><span class="line">  if(userName.trim()===&#x27;&#x27; || userContent.trim() === &#x27;&#x27;)&#123;</span><br><span class="line">      alert(&#x27;请输入内容&#x27;)</span><br><span class="line">      return</span><br><span class="line">  &#125;</span><br><span class="line">  // 利用数组拓展运算符来进行数据的拼接，把用户输入的存放在数组的第一个位置</span><br><span class="line">  let newComments = [&#123;</span><br><span class="line">    id: this.state.comments.length+1,</span><br><span class="line">    name: userName,</span><br><span class="line">    content: userContent</span><br><span class="line">  &#125;,...this.state.comments]</span><br><span class="line">  this.setState(&#123;</span><br><span class="line">    comments: newComments,</span><br><span class="line">    userName:&#x27;&#x27;,</span><br><span class="line">    userContent: &#x27;&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="React组件进阶"><a href="#React组件进阶" class="headerlink" title="React组件进阶"></a>React组件进阶</h1><h2 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够使用props接收数据</li>
<li>能够实现父子组件之间的通讯</li>
<li>能够实现兄弟组件之间的通讯</li>
<li>能够给组件添加props校验</li>
</ul>
<h2 id="组件通讯介绍"><a href="#组件通讯介绍" class="headerlink" title="组件通讯介绍"></a>组件通讯介绍</h2><p>组件是独立且封闭的单元，默认情况下，只能使用组件自己的数据。在组件化过程中，我们将一个完整的功能拆分成多个组件，以更好的完成整个应用的功能。而在这个过程中，多个组件之间不可避免的要共享某些数据。为了实现这些功能，就需要打破组件的独立封闭性，让其与外界沟通，这个过程就是组件通讯</p>
<h2 id="组件的props（★★★）"><a href="#组件的props（★★★）" class="headerlink" title="组件的props（★★★）"></a>组件的props（★★★）</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ul>
<li>组件时封闭的，要接受外部数据应该通过props来实现</li>
<li>props的作用：接收传递给组件的数据</li>
<li>传递数据：给组件标签添加属性</li>
</ul>
<p><img src="images/props-%E8%AE%BE%E7%BD%AE.png"></p>
<ul>
<li><p>接收数据：函数组件通过 参数 props接收数据，类组件通过 this.props接收数据</p>
<ul>
<li><p>函数组件获取</p>
<p><img src="images/%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E8%8E%B7%E5%8F%96.png"></p>
</li>
<li><p>类组件获取</p>
<p><img src="images/%E7%B1%BB%E7%BB%84%E4%BB%B6%E8%8E%B7%E5%8F%96.png"></p>
</li>
</ul>
</li>
</ul>
<p>​    </p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>可以给组件传递任意类型的数据</li>
<li>props是只读属性，不能对值进行修改</li>
<li>注意：使用类组件时，如果写了构造函数，应该将props传递给super(),否则，无法在构造函数中获取到props，其他的地方是可以拿到的</li>
</ul>
<p><img src="images/%E7%B1%BB%E7%BB%84%E4%BB%B6%E6%B3%A8%E6%84%8F%E7%82%B9.png"></p>
<h2 id="组件通讯的三种方式（★★★）"><a href="#组件通讯的三种方式（★★★）" class="headerlink" title="组件通讯的三种方式（★★★）"></a>组件通讯的三种方式（★★★）</h2><h3 id="父组件传递数据给子组件"><a href="#父组件传递数据给子组件" class="headerlink" title="父组件传递数据给子组件"></a>父组件传递数据给子组件</h3><ul>
<li>父组件提供要传递的state数据</li>
<li>给子组件标签添加属性，值为state中的数据</li>
<li>子组件中通过props接收父组件中传递的数据</li>
</ul>
<p><img src="images/%E7%88%B6%E4%BC%A0%E5%AD%90.png"></p>
<h3 id="子组件传递数据给父组件"><a href="#子组件传递数据给父组件" class="headerlink" title="子组件传递数据给父组件"></a>子组件传递数据给父组件</h3><ul>
<li>利用回调函数，父组件提供回调，子组件调用，将要传递的数据作为回调函数的参数</li>
<li>父组件提供一个回调函数，用来接收数据</li>
<li>将该函数作为属性的值，传递给子组件</li>
</ul>
<p><img src="images/%E5%AD%90%E4%BC%A0%E7%88%B6-%E7%88%B6%E4%BA%B2%E8%AE%BE%E7%BD%AE%E5%9B%9E%E8%B0%83.png"></p>
<ul>
<li>子组件通过props调用回调函数</li>
</ul>
<p><img src="images/%E5%AD%90%E4%BC%A0%E7%88%B6-%E8%B0%83%E7%94%A8%E5%9B%9E%E8%B0%83.png"></p>
<h3 id="兄弟组件传递"><a href="#兄弟组件传递" class="headerlink" title="兄弟组件传递"></a>兄弟组件传递</h3><ul>
<li>将共享状态(数据)提升到最近的公共父组件中，由公共父组件管理这个状态</li>
<li>这个称为状态提升</li>
<li>公共父组件职责：1. 提供共享状态 2.提供操作共享状态的方法</li>
<li>要通讯的子组件只需要通过props接收状态或操作状态的方法</li>
</ul>
<p><img src="images/%E5%85%84%E5%BC%9F%E4%BC%A0%E9%80%92.png"></p>
<h4 id="示例demo-2"><a href="#示例demo-2" class="headerlink" title="示例demo"></a>示例demo</h4><ul>
<li>定义布局结构，一个Counter里面包含两个子组件，一个是计数器的提示，一个是按钮</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">class Counter extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (&lt;div&gt;</span><br><span class="line">            &lt;Child1 /&gt;</span><br><span class="line">            &lt;Child2 /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Child1 extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;h1&gt;计数器：&lt;/h1&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">class Child2 extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在父组件里定义共享状态，把这个状态传递给第一个子组件</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">class Counter extends React.Component &#123;</span><br><span class="line">    // 提供共享的状态</span><br><span class="line">    state = &#123;</span><br><span class="line">        count: 0</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (&lt;div&gt;</span><br><span class="line">            &#123;/* 把状态提供给第一个子组件 */&#125;</span><br><span class="line">            &lt;Child1 count=&#123;this.state.count&#125;/&gt;</span><br><span class="line">            &lt;Child2 /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在第一个子组件里面就能通过props获取到</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Child1 extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;h1&gt;计数器：&#123;this.props.count&#125;&lt;/h1&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在父组件中提供共享方法，通过属性传递给第二个子组件，方便第二个子组件来进行调用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// 提供共享方法</span><br><span class="line">onIncrement = (res) =&gt; &#123;</span><br><span class="line">    // 只要第二个子组件调用了这个函数，就会执行里面代码</span><br><span class="line">    this.setState(&#123;</span><br><span class="line">        count: this.state.count + res</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line">render() &#123;</span><br><span class="line">    return (&lt;div&gt;</span><br><span class="line">        ...</span><br><span class="line">        &#123;/* 把共享方法提供给第二个子组件 */&#125;</span><br><span class="line">        &lt;Child2 onIncrement=&#123;this.onIncrement&#125; /&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在第二个子组件里面通过props来获取到对应函数，然后进行调用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">class Child2 extends React.Component &#123;</span><br><span class="line">    handleClick = () =&gt; &#123;</span><br><span class="line">        // 这里一旦调用，就会执行父组件里面 onIncrement函数</span><br><span class="line">        this.props.onIncrement(2)</span><br><span class="line">    &#125;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;button onClick=&#123;this.handleClick&#125;&gt;+&lt;/button&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Context（★★★）"><a href="#Context（★★★）" class="headerlink" title="Context（★★★）"></a>Context（★★★）</h2><p>如果出现层级比较多的情况下（例如：爷爷传递数据给孙子），我们会使用Context来进行传递</p>
<p>作用： 跨组件传递数据</p>
<h3 id="使用步骤-2"><a href="#使用步骤-2" class="headerlink" title="使用步骤"></a>使用步骤</h3><ul>
<li>调用 <code>React.createContext()</code> 创建 Provider(提供数据) 和 Consumer(消费数据) 两个组件</li>
</ul>
<p><img src="images/%E5%88%9B%E5%BB%BAContext.png"></p>
<ul>
<li>使用Provider 组件作为父节点</li>
</ul>
<p><img src="images/provider.png"></p>
<ul>
<li>设置value属性，表示要传递的数据</li>
</ul>
<p><img src="images/%E8%AE%BE%E7%BD%AEvalue%E5%B1%9E%E6%80%A7.png"></p>
<ul>
<li>哪一层想要接收数据，就用Consumer进行包裹，在里面回调函数中的参数就是传递过来的值</li>
</ul>
<p><img src="images/Comsumer.png"></p>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li>如果两个组件相隔层级比较多，可以使用Context实现组件通讯</li>
<li>Context提供了两个组件：Provider 和 Consumer</li>
<li>Provider组件： 用来提供数据</li>
<li>Consumer组件： 用来消费数据</li>
</ul>
<h2 id="props进阶"><a href="#props进阶" class="headerlink" title="props进阶"></a>props进阶</h2><h3 id="children属性"><a href="#children属性" class="headerlink" title="children属性"></a>children属性</h3><ul>
<li>children属性： 表示组件标签的子节点，当组件标签有子节点时，props就会有该属性</li>
<li>children属性与普通的props一样，值可以使任意值（文本、react元素、组件、甚至是函数）</li>
</ul>
<p><img src="images/props-children.png"></p>
<h3 id="props校验（★★★）"><a href="#props校验（★★★）" class="headerlink" title="props校验（★★★）"></a>props校验（★★★）</h3><ul>
<li>对于组件来说，props是外来的，无法保证组件使用者传入什么格式的数据，简单来说就是组件调用者可能不知道组件封装着需要什么样的数据</li>
<li>如果传入的数据不对，可能会导致报错</li>
<li>关键问题：组件的使用者不知道需要传递什么样的数据</li>
<li>props校验：允许在创建组件的时候，指定props的类型、格式等</li>
</ul>
<p><img src="images/props-%E6%A0%A1%E9%AA%8C.png"></p>
<ul>
<li>作用：捕获使用组件时因为props导致的错误，给出明确的错误提示，增加组件的健壮性</li>
</ul>
<p><img src="images/props-%E9%94%99%E8%AF%AF%E6%8F%90%E7%A4%BA.png"></p>
<h4 id="使用步骤-3"><a href="#使用步骤-3" class="headerlink" title="使用步骤"></a>使用步骤</h4><ul>
<li>安装包  <code>prop-types (yarn add prop-types | npm i props-types)</code></li>
<li>导入prop-types 包</li>
<li>使用<code>组件名.propTypes=&#123;&#125;</code> 来给组件的props添加校验规则</li>
<li>校验规则通过PropTypes对象来指定</li>
</ul>
<p><img src="images/propsTypes.png"></p>
<h4 id="常见的约束规则"><a href="#常见的约束规则" class="headerlink" title="常见的约束规则"></a>常见的约束规则</h4><ul>
<li>创建的类型： <code>array、bool、func、number、object、string</code></li>
<li>React元素类型：<code>element</code></li>
<li>必填项：<code>isRequired</code></li>
<li>特定结构的对象： <code>shape(&#123;&#125;)</code></li>
<li>更多的<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/typechecking-with-proptypes.html#proptypes">约束规则</a></li>
</ul>
<p><img src="images/props-%E7%BA%A6%E6%9D%9F%E8%A7%84%E5%88%99.png"></p>
<h3 id="props的默认值"><a href="#props的默认值" class="headerlink" title="props的默认值"></a>props的默认值</h3><ul>
<li>场景：分页组件 -&gt; 每页显示条数</li>
</ul>
<p><img src="images/props%E9%BB%98%E8%AE%A4%E5%80%BC.png"></p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-react基础Day01-React概述&amp;脚手架搭建&amp;JSX&amp;组件"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day01-React%E6%A6%82%E8%BF%B0&%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA&JSX&%E7%BB%84%E4%BB%B6/"
    >Day1 React概述&amp;脚手架搭建&amp;JSX&amp;组件</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/17/react%E5%9F%BA%E7%A1%80Day01-React%E6%A6%82%E8%BF%B0&%E8%84%9A%E6%89%8B%E6%9E%B6%E6%90%AD%E5%BB%BA&JSX&%E7%BB%84%E4%BB%B6/" class="article-date">
  <time datetime="2022-01-17T13:23:31.000Z" itemprop="datePublished">2022-01-17</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="React基础知识点"><a href="#React基础知识点" class="headerlink" title="React基础知识点"></a>React基础知识点</h1><h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够说出React是什么</li>
<li>能够说出React的特点</li>
<li>能够掌握React的基本使用</li>
<li>能够使用React脚手架</li>
</ul>
<h2 id="什么是React-（★★★）"><a href="#什么是React-（★★★）" class="headerlink" title="什么是React （★★★）"></a>什么是React （★★★）</h2><p>React是一个用于构建用户界面的javaScript库，起源于facebook的内部项目，后续在13年开源了出来</p>
<h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ul>
<li>声明式</li>
</ul>
<p>你只需要描述UI看起来是什么样式，就跟写HTML一样，React负责渲染UI</p>
<ul>
<li>基于组件</li>
</ul>
<p>组件时React最重要的内容，组件表示页面中的部分内容</p>
<ul>
<li>学习一次，随处使用</li>
</ul>
<p>使用React可以开发Web应用，使用React可以开发移动端，可以开发VR应用</p>
<h2 id="React基本使用"><a href="#React基本使用" class="headerlink" title="React基本使用"></a>React基本使用</h2><h3 id="React的安装"><a href="#React的安装" class="headerlink" title="React的安装"></a>React的安装</h3><p>npm i react react-dom </p>
<ul>
<li>react 包是核心，提供创建元素，组件等功能</li>
<li>react-dom 包提供DOM相关功能</li>
</ul>
<h3 id="React的使用"><a href="#React的使用" class="headerlink" title="React的使用"></a>React的使用</h3><ul>
<li>引入react和react-dom的两个js文件</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/react/umd/react.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./node_modules/react-dom/umd/react-dom.development.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>创建React元素</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建元素节点</span></span><br><span class="line"><span class="comment">// 1. 元素名称</span></span><br><span class="line"><span class="comment">// 2. 元素属性 传递的是个对象</span></span><br><span class="line"><span class="comment">// 3. 元素内容</span></span><br><span class="line"><span class="keyword">let</span> title = React.createElement(<span class="string">&#x27;li&#x27;</span>, <span class="literal">null</span>, <span class="string">&#x27;hellow react&#x27;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>渲染到页面</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 渲染到页面</span></span><br><span class="line">ReactDOM.render(title, root)</span><br></pre></td></tr></table></figure>

<h2 id="React脚手架（★★★）"><a href="#React脚手架（★★★）" class="headerlink" title="React脚手架（★★★）"></a>React脚手架（★★★）</h2><h3 id="React脚手架意义"><a href="#React脚手架意义" class="headerlink" title="React脚手架意义"></a>React脚手架意义</h3><ul>
<li>脚手架是开发现代Web应用的必备</li>
<li>充分利用 Webpack，Babel，ESLint等工具辅助项目开发</li>
<li>零配置，无需手动配置繁琐的工具即可使用</li>
<li>关注业务，而不是工具配置</li>
</ul>
<h3 id="使用React脚手架初始化项目"><a href="#使用React脚手架初始化项目" class="headerlink" title="使用React脚手架初始化项目"></a>使用React脚手架初始化项目</h3><ul>
<li>初始化项目，命令： npx create-react-app my-pro<ul>
<li>npx 目的：提升包内提供的命令行工具的使用体验</li>
<li>原来：先安装脚手架包，再使用这个包中提供的命令</li>
<li>现在：无需安装脚手架包，就可以直接使用这个包提供的命令</li>
<li>create-react-app  这个是脚手架名称 不能随意更改</li>
<li>my-pro  自己定义的项目名称</li>
</ul>
</li>
<li>启动项目，在项目根目录执行命令： npm start</li>
</ul>
<p>yarn命令简介</p>
<ul>
<li>yarn 是Facebook发布的包管理器，可以看做是npm的替代品，功能与npm相同</li>
<li>yarn具有快速，可靠和安全的特点</li>
<li>初始化新项目：yarn init</li>
<li>安装包： yarn add 包名称</li>
<li>安装项目依赖： yarn</li>
</ul>
<h3 id="脚手架中使用React"><a href="#脚手架中使用React" class="headerlink" title="脚手架中使用React"></a>脚手架中使用React</h3><ul>
<li>导入react和react-dom两个包</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;</span><br></pre></td></tr></table></figure>

<ul>
<li>创建元素</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let h1 = React.createElement(&#x27;h1&#x27;,null,&#x27;我是标题&#x27;)</span><br></pre></td></tr></table></figure>

<ul>
<li>渲染到页面</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(h1,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h1 id="JSX的使用"><a href="#JSX的使用" class="headerlink" title="JSX的使用"></a>JSX的使用</h1><h2 id="目标-1"><a href="#目标-1" class="headerlink" title="目标"></a>目标</h2><ul>
<li>知道什么是JSX</li>
<li>能够使用JSX创建React元素</li>
<li>能够在JSX中使用JavaScript表达式</li>
<li>能够使用JSX的条件渲染和列表渲染</li>
<li>能够给JSX添加样式</li>
</ul>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h4 id="JSX产生的原因"><a href="#JSX产生的原因" class="headerlink" title="JSX产生的原因"></a>JSX产生的原因</h4><p>由于通过createElement()方法创建的React元素有一些问题，代码比较繁琐，结构不直观，无法一眼看出描述的结构，不优雅，用户体验不爽</p>
<h4 id="JSX的概述"><a href="#JSX的概述" class="headerlink" title="JSX的概述"></a>JSX的概述</h4><p>JSX是JavaScript XML 的简写，表示在JavaScript代码中写HTML格式的代码</p>
<p>优势：声明式语法更加直观，与HTML结构相同，降低了学习成本，提升开发效率</p>
<h2 id="简单入门使用（★★★）"><a href="#简单入门使用（★★★）" class="headerlink" title="简单入门使用（★★★）"></a>简单入门使用（★★★）</h2><h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><ul>
<li>使用JSX语法创建react元素</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let h1 = &lt;h1&gt;我是通过JSX创建的元素&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用ReactDOM来渲染元素</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(h1,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h4 id="为什么在脚手架中可以使用JSX语法"><a href="#为什么在脚手架中可以使用JSX语法" class="headerlink" title="为什么在脚手架中可以使用JSX语法"></a>为什么在脚手架中可以使用JSX语法</h4><ul>
<li>JSX 不是标准的ECMAScript语法，它是ECMAScript的语法拓展</li>
<li>需要使用babel编译处理后，才能在浏览器环境中使用</li>
<li>create-react-app脚手架中已经默认有该配置，无需手动配置</li>
<li>编译JSX语法的包： @bable/preset-react</li>
</ul>
<h4 id="注意点"><a href="#注意点" class="headerlink" title="注意点"></a>注意点</h4><ul>
<li>React元素的属性名使用驼峰命名法</li>
<li>特殊属性名：class -&gt; className，for -&gt; htmlFor，tabindex -&gt; tabIndex</li>
<li>如果没有子节点的React元素可以用 <code>/&gt;</code> 来结束</li>
<li>推荐：使用 小括号包裹JSX，从而避免JS中自动插入分号报错</li>
</ul>
<h2 id="JSX语法（★★★）"><a href="#JSX语法（★★★）" class="headerlink" title="JSX语法（★★★）"></a>JSX语法（★★★）</h2><p>JSX是来描述页面的结构，我们一般在编写业务逻辑渲染页面的时候，需要涉及到传递值，调用函数，判断条件，循环等，这一些在JSX中都能得到支持</p>
<h4 id="嵌入JS表达式"><a href="#嵌入JS表达式" class="headerlink" title="嵌入JS表达式"></a>嵌入JS表达式</h4><p>语法：{JavaScritp表达式}</p>
<p>例子：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">let content = &#x27;插入的内容&#x27;</span><br><span class="line">let h1 = &lt;h1&gt;我是通过JSX创建的元素+ &#123;content&#125;&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<h5 id="注意点-1"><a href="#注意点-1" class="headerlink" title="注意点"></a>注意点</h5><ul>
<li>只要是合法的js表达式都可以进行嵌入</li>
<li>JSX自身也是js表达式</li>
<li>注意：js中的对象是一个例外，一般只会出现在style属性中</li>
<li>注意：在{}中不能出现语句</li>
</ul>
<h4 id="条件渲染"><a href="#条件渲染" class="headerlink" title="条件渲染"></a>条件渲染</h4><p>根据不同的条件来渲染不同的JSX结构</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let isLoading = true</span><br><span class="line">let loading = ()=&gt;&#123;</span><br><span class="line">    if(isLoading)&#123;</span><br><span class="line">        return &lt;div&gt;Loading...&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">    return &lt;div&gt;加载完成&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以发现，写JSX的条件渲染与我们之前编写代码的逻辑是差不多的，根据不同的判断逻辑，返回不同的 JSX结构，然后渲染到页面中</p>
<h4 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h4><ul>
<li>如果需要渲染一组数据，我们应该使用数组的 map () 方法</li>
<li>注意：渲染列表的时候需要添加key属性，key属性的值要保证唯一</li>
<li>原则：map()遍历谁，就给谁添加key属性</li>
<li>注意：尽量避免使用索引号作为key</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">let arr = [&#123;</span><br><span class="line">    id:1,</span><br><span class="line">    name:&#x27;三国演义&#x27;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    id:2,</span><br><span class="line">    name:&#x27;水浒传&#x27;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    id:3,</span><br><span class="line">    name:&#x27;西游记&#x27;</span><br><span class="line">&#125;,&#123;</span><br><span class="line">    id:4,</span><br><span class="line">    name:&#x27;红楼梦&#x27;</span><br><span class="line">&#125;]</span><br><span class="line">let ul = (&lt;ul&gt;</span><br><span class="line">    &#123;arr.map(item =&gt; &lt;li key=&#123;item.id&#125;&gt;&#123;item.name&#125;&lt;/li&gt;)&#125;</span><br><span class="line">&lt;/ul&gt;)</span><br><span class="line">ReactDOM.render(ul,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h4 id="样式处理"><a href="#样式处理" class="headerlink" title="样式处理"></a>样式处理</h4><h5 id="行内样式-style"><a href="#行内样式-style" class="headerlink" title="行内样式 -style"></a>行内样式 -style</h5><p>在style里面我们通过对象的方式传递数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;li key=&#123;item.id&#125; style=&#123;&#123;&#x27;color&#x27;: &#x27;red&#x27;,&quot;backgroundColor&quot;: &#x27;pink&#x27;&#125;&#125;&gt;&#123;item.name&#125;&lt;/li&gt;</span><br></pre></td></tr></table></figure>

<p>这种方式比较的麻烦，不方便进行阅读，而且还会导致代码比较的繁琐</p>
<h5 id="类名-className"><a href="#类名-className" class="headerlink" title="类名 -className"></a>类名 -className</h5><p>创建CSS文件编写样式代码</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span> &#123;</span><br><span class="line">    <span class="attribute">text-align</span>: center</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在js中进行引入，然后设置类名即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./css/index.css&#x27;</span><br><span class="line"></span><br><span class="line">&lt;li className=&#x27;container&#x27; key=&#123;item.id&#125; style=&#123;&#123;&#x27;color&#x27;: &#x27;red&#x27;,&quot;backgroundColor&quot;: &#x27;pink&#x27;&#125;&#125;&gt;&#123;item.name&#125;&lt;/li&gt;</span><br></pre></td></tr></table></figure>
<h4 id="类名-classnames处理样式"><a href="#类名-classnames处理样式" class="headerlink" title="类名 -classnames处理样式"></a>类名 -classnames处理样式</h4><p>使用classnames第三方模块控制样式  </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.active</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 引入classnames  </span></span><br><span class="line"><span class="keyword">import</span> classNames <span class="keyword">from</span> <span class="string">&#x27;classnames&#x27;</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">// 2. 使用classnames 控制样式  </span></span><br><span class="line">&lt;h1 className=&#123;classNames(&#123; <span class="attr">title</span>: <span class="literal">true</span>, <span class="attr">active</span>: <span class="literal">true</span> &#125;)&#125;&gt;你是最胖的！&lt;/h1&gt;</span><br></pre></td></tr></table></figure>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li>JSX是React的核心内容</li>
<li>JSX表示在JS代码中写HTML结构，是React声明式的体现</li>
<li>使用JSX配合嵌入的JS表达式、条件渲染、列表渲染、可以描述任意UI结构</li>
<li>推荐使用className的方式给JSX添加样式</li>
<li>React完全利用JS语言自身的能力来编写UI，而不是造轮子增强HTML功能</li>
</ul>
<h1 id="React组件"><a href="#React组件" class="headerlink" title="React组件"></a>React组件</h1><h2 id="目标-2"><a href="#目标-2" class="headerlink" title="目标"></a>目标</h2><ul>
<li>能够使用函数创建组件</li>
<li>能够使用class创建组件</li>
<li>能够给React元素绑定事件</li>
<li>能够使用state和setState()</li>
<li>能够处理事件中的this指向问题</li>
</ul>
<h2 id="React组件介绍"><a href="#React组件介绍" class="headerlink" title="React组件介绍"></a>React组件介绍</h2><ul>
<li>组件是React的一等公民，使用React就是在用组件</li>
<li>组件表示页面中的部分功能</li>
<li>组合多个组件实现完整的页面功能</li>
<li>特点：可复用、独立、可组合</li>
</ul>
<p><img src="images/%E7%BB%84%E4%BB%B6.png"></p>
<h2 id="组件的创建方式"><a href="#组件的创建方式" class="headerlink" title="组件的创建方式"></a>组件的创建方式</h2><h3 id="函数创建组件"><a href="#函数创建组件" class="headerlink" title="函数创建组件"></a>函数创建组件</h3><ul>
<li>函数组件：使用JS的函数创建组件</li>
<li><strong>约定1：</strong>函数名称必须以大写字母开头</li>
<li><strong>约定2：</strong>函数组件必须有返回值，表示该组件的结构</li>
<li>如果返回值为null，表示不渲染任何内容</li>
</ul>
<h4 id="示例demo"><a href="#示例demo" class="headerlink" title="示例demo"></a>示例demo</h4><p>编写函数组件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function Hello() &#123;</span><br><span class="line">    return (</span><br><span class="line">        &lt;div&gt;这是第一个函数组件&lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>利用ReactDOM.render()进行渲染</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(&lt;Hello /&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h3 id="类组件（★★★）"><a href="#类组件（★★★）" class="headerlink" title="类组件（★★★）"></a>类组件（★★★）</h3><ul>
<li>使用ES6语法的class创建的组件</li>
<li>约定1：类名称也必须要大写字母开头</li>
<li>约定2：类组件应该继承React.Component父类，从而可以使用父类中提供的方法或者属性</li>
<li>约定3：类组件必须提供 render 方法</li>
<li>约定4：render方法中必须要有return返回值</li>
</ul>
<h4 id="示例demo-1"><a href="#示例demo-1" class="headerlink" title="示例demo"></a>示例demo</h4><p>创建class类，继承React.Component，在里面提供render方法，在return里面返回内容</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class Hello extends React.Component&#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;这是第一个类组件&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过ReactDOM进行渲染</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ReactDOM.render(&lt;Hello /&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h3 id="抽离成单独的JS文件（★★★）"><a href="#抽离成单独的JS文件（★★★）" class="headerlink" title="抽离成单独的JS文件（★★★）"></a>抽离成单独的JS文件（★★★）</h3><ul>
<li>思考：项目中组件多了之后，该如何组织这些组件？</li>
<li>选择一：将所有的组件放在同一个JS文件中</li>
<li>选择二：将每个组件放到单独的JS文件中</li>
<li><strong>组件作为一个独立的个体，一般都会放到一个单独的JS文件中</strong></li>
</ul>
<h4 id="示例demo-2"><a href="#示例demo-2" class="headerlink" title="示例demo"></a>示例demo</h4><ul>
<li>创建Hello.js</li>
<li>在Hello.js 中导入React，创建组件，在Hello.js中导出</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">export default class extends React.Component &#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;单独抽离出来的 Hello&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在index.js中导入Hello组件，渲染到页面</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Hello from &#x27;./js/Hello&#x27;</span><br><span class="line">ReactDOM.render(&lt;Hello /&gt;,document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h2 id="React事件处理（★★★）"><a href="#React事件处理（★★★）" class="headerlink" title="React事件处理（★★★）"></a>React事件处理（★★★）</h2><h3 id="事件绑定"><a href="#事件绑定" class="headerlink" title="事件绑定"></a>事件绑定</h3><ul>
<li>React事件绑定语法与DOM事件语法相似</li>
<li>语法：on+事件名称=事件处理函数，比如  onClick = function(){}</li>
<li>注意：React事件采用驼峰命名法</li>
</ul>
<h4 id="示例demo-3"><a href="#示例demo-3" class="headerlink" title="示例demo"></a>示例demo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">export default class extends React.Component &#123;</span><br><span class="line">    clickHandle(e)&#123;</span><br><span class="line">        console.log(&#x27;点了&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;&lt;button onClick = &#123;this.clickHandle&#125;&gt;点我点我点我&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h4><ul>
<li>在React中绑定事件与原生很类似</li>
<li>需要注意点在于，在React绑定事件需要遵循驼峰命名法</li>
<li>类组件与函数组件绑定事件是差不多的，只是在类组件中绑定事件函数的时候需要用到this，代表指向当前的类的引用，在函数中不需要调用this</li>
</ul>
<h3 id="事件对象"><a href="#事件对象" class="headerlink" title="事件对象"></a>事件对象</h3><ul>
<li>可以通过事件处理函数的参数获取到事件对象</li>
<li>React中的事件对象叫做：合成事件</li>
<li>合成事件：兼容所有浏览器，无需担心跨浏览器兼容问题</li>
<li>除兼容所有浏览器外，它还拥有和浏览器原生事件相同的接口，包括 <code>stopPropagation()</code>和 <code>preventDefault()</code></li>
<li>如果你想获取到原生事件对象，可以通过 <code>nativeEvent</code> 属性来进行获取</li>
</ul>
<h4 id="示例demo-4"><a href="#示例demo-4" class="headerlink" title="示例demo"></a>示例demo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">export default class extends React.Component &#123;</span><br><span class="line">    clickHandle(e)&#123;</span><br><span class="line">        // 获取原生事件对象</span><br><span class="line">        console.log(e.nativeEvent)</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;&lt;button onClick = &#123;this.clickHandle&#125;&gt;点我点我点我&lt;/button&gt;&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="支持的事件（有兴趣的课下去研究）"><a href="#支持的事件（有兴趣的课下去研究）" class="headerlink" title="支持的事件（有兴趣的课下去研究）"></a>支持的事件（有兴趣的课下去研究）</h3><ul>
<li><p>Clipboard Events  剪切板事件</p>
<ul>
<li>事件名 ：onCopy onCut onPaste</li>
<li>属性     ：DOMDataTransfer clipboardData</li>
</ul>
</li>
<li><p>compositionEvent  复合事件</p>
<ul>
<li>事件名： onCompositionEnd onCompositionStart onCompositionUpdate</li>
<li>属性： string data</li>
</ul>
</li>
<li><p>Keyboard Events  键盘事件</p>
<ul>
<li>事件名：onKeyDown onKeyPress onKeyUp</li>
<li>属性： 例如 number keyCode  太多就不一一列举</li>
</ul>
</li>
<li><p>Focus Events  焦点事件  （这些焦点事件在 React DOM 上的所有元素都有效，不只是表单元素）</p>
<ul>
<li>事件名： onFocus onBlur</li>
<li>属性： DOMEventTarget relatedTarget</li>
</ul>
</li>
<li><p>Form Events  表单事件</p>
<ul>
<li>事件名： onChange onInput onInvalid onSubmit</li>
</ul>
</li>
<li><p>Mouse Events  鼠标事件</p>
<ul>
<li><p>事件名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">onClick onContextMenu onDoubleClick onDrag onDragEnd onDragEnter onDragExit</span><br><span class="line">onDragLeave onDragOver onDragStart onDrop onMouseDown onMouseEnter onMouseLeave</span><br><span class="line">onMouseMove onMouseOut onMouseOver onMouseUp</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Pointer Events  指针事件</p>
<ul>
<li><p>事件名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">onPointerDown onPointerMove onPointerUp onPointerCancel onGotPointerCapture</span><br><span class="line">onLostPointerCapture onPointerEnter onPointerLeave onPointerOver onPointerOut</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Selection Events  选择事件</p>
<ul>
<li>事件名：onSelect</li>
</ul>
</li>
<li><p>Touch Events  触摸事件</p>
<ul>
<li>事件名：onTouchCancel onTouchEnd onTouchMove onTouchStart</li>
</ul>
</li>
<li><p>UI Events  UI 事件</p>
<ul>
<li>事件名： onScroll</li>
</ul>
</li>
<li><p>Wheel Events  滚轮事件</p>
<ul>
<li><p>事件名：onWheel</p>
</li>
<li><p>属性： </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">number deltaMode</span><br><span class="line">number deltaX</span><br><span class="line">number deltaY</span><br><span class="line">number deltaZ</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Media Events  媒体事件</p>
<ul>
<li><p>事件名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">onAbort onCanPlay onCanPlayThrough onDurationChange onEmptied onEncrypted</span><br><span class="line">onEnded onError onLoadedData onLoadedMetadata onLoadStart onPause onPlay</span><br><span class="line">onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend</span><br><span class="line">onTimeUpdate onVolumeChange onWaiting</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Image Events 图像事件</p>
<ul>
<li>事件名：onLoad onError</li>
</ul>
</li>
<li><p>Animation Events 动画事件</p>
<ul>
<li>事件名：onAnimationStart onAnimationEnd onAnimationIteration</li>
</ul>
</li>
<li><p>Transition Events 过渡事件</p>
<ul>
<li>事件名：onTransitionEnd</li>
</ul>
</li>
<li><p>Other Events  其他事件</p>
<ul>
<li>事件名： onToggle</li>
</ul>
</li>
</ul>
<h2 id="有状态组件和无状态组件"><a href="#有状态组件和无状态组件" class="headerlink" title="有状态组件和无状态组件"></a>有状态组件和无状态组件</h2><ul>
<li>函数组件又叫做 无状态组件，类组件又叫做 有状态组件</li>
<li>状态(state) 即数据</li>
<li>函数组件没有自己的状态，只负责数据展示</li>
<li>类组件有自己的状态，负责更新UI，让页面动起来</li>
</ul>
<p><img src="images/%E7%8A%B6%E6%80%81.png"></p>
<h2 id="State和SetState（★★★）"><a href="#State和SetState（★★★）" class="headerlink" title="State和SetState（★★★）"></a>State和SetState（★★★）</h2><h3 id="state基本使用"><a href="#state基本使用" class="headerlink" title="state基本使用"></a>state基本使用</h3><ul>
<li>状态(state)即数据，是组件内部的私有数据，只能在组件内部使用</li>
<li>state的值是对象，表示一个组件中可以有多个数据</li>
<li>通过this.state来获取状态</li>
</ul>
<h4 id="示例demo-5"><a href="#示例demo-5" class="headerlink" title="示例demo"></a>示例demo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">export default class extends React.Component &#123;</span><br><span class="line">    constructor()&#123;</span><br><span class="line">        super()</span><br><span class="line"></span><br><span class="line">        // 第一种初始化方式</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            count : 0</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    // 第二种初始化方式</span><br><span class="line">    state = &#123;</span><br><span class="line">        count:1</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;计数器 :&#123;this.state.count&#125;&lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="setState-修改状态"><a href="#setState-修改状态" class="headerlink" title="setState() 修改状态"></a>setState() 修改状态</h3><ul>
<li>状态是可变的</li>
<li>语法：this.setState({要修改的数据})</li>
<li><strong>注意：不要直接修改state中的值，这是错误的</strong></li>
<li>setState() 作用：1.修改 state 2.更新UI</li>
<li>思想：数据驱动视图</li>
</ul>
<p><img src="images/%E4%BF%AE%E6%94%B9%E7%8A%B6%E6%80%81.png"></p>
<h4 id="示例demo-6"><a href="#示例demo-6" class="headerlink" title="示例demo"></a>示例demo</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">export default class extends React.Component &#123;</span><br><span class="line">    // 第二种初始化方式</span><br><span class="line">    state = &#123;</span><br><span class="line">        count:1</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;div&gt;计数器 :&#123;this.state.count&#125;&lt;/div&gt;</span><br><span class="line">                &lt;button onClick=&#123;() =&gt; &#123;</span><br><span class="line">                     this.setState(&#123;</span><br><span class="line">            	 		count: this.state.count+1</span><br><span class="line">           			  &#125;)   </span><br><span class="line">                &#125;&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="小结-2"><a href="#小结-2" class="headerlink" title="小结"></a>小结</h4><ul>
<li>修改state里面的值我们需要通过 this.setState() 来进行修改</li>
<li>React底层会有监听，一旦我们调用了setState导致了数据的变化，就会重新调用一次render方法，重新渲染当前组件</li>
</ul>
<h3 id="抽取事件处理函数"><a href="#抽取事件处理函数" class="headerlink" title="抽取事件处理函数"></a>抽取事件处理函数</h3><ul>
<li>当我们把上面代码的事件处理程序抽取出来后，会报错，找不到this</li>
</ul>
<p><img src="images/this%E6%89%BE%E4%B8%8D%E5%88%B0.png"></p>
<h4 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h4><ul>
<li>在JSX中我们写的事件处理函数可以找到this，原因在于在JSX中我们利用箭头函数，箭头函数是不会绑定this，所以会向外一层去寻找，外层是render方法，在render方法里面的this刚好指向的是当前实例对象</li>
</ul>
<h2 id="事件绑定this指向"><a href="#事件绑定this指向" class="headerlink" title="事件绑定this指向"></a>事件绑定this指向</h2><h3 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h3><ul>
<li>利用箭头函数自身不绑定this的特点</li>
</ul>
<p><img src="images/%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0.png"></p>
<h3 id="利用bind方法（★★★）"><a href="#利用bind方法（★★★）" class="headerlink" title="利用bind方法（★★★）"></a>利用bind方法（★★★）</h3><p>利用原型bind方法是可以更改函数里面this的指向的，所以我们可以在构造中调用bind方法，然后把返回的值赋值给我们的函数即可</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">class App extends React.Component &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    super()</span><br><span class="line">	...</span><br><span class="line">    // 通过bind方法改变了当前函数中this的指向</span><br><span class="line">    this.onIncrement = this.onIncrement.bind(this)</span><br><span class="line">  &#125;</span><br><span class="line">  // 事件处理程序</span><br><span class="line">  onIncrement() &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="class的实例方法（★★★）"><a href="#class的实例方法（★★★）" class="headerlink" title="class的实例方法（★★★）"></a>class的实例方法（★★★）</h3><ul>
<li>利用箭头函数形式的class实例方法</li>
<li>注意：该语法是实验性语法，但是，由于babel的存在可以使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 事件处理程序</span><br><span class="line">onIncrement = () =&gt; &#123;</span><br><span class="line">  console.log(&#x27;事件处理程序中的this：&#x27;, this)</span><br><span class="line">  this.setState(&#123;</span><br><span class="line">    count: this.state.count + 1</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="小结-3"><a href="#小结-3" class="headerlink" title="小结"></a>小结</h3><ul>
<li>推荐：使用class的实例方法，也是依赖箭头函数不绑定this的原因</li>
</ul>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-vue-cli3.0项目优化"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/10/vue-cli3.0%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96/"
    >ue-cli3.0 项目优化</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/10/vue-cli3.0%E9%A1%B9%E7%9B%AE%E4%BC%98%E5%8C%96/" class="article-date">
  <time datetime="2022-01-10T12:53:31.000Z" itemprop="datePublished">2022-01-10</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="Vue-cli3-0-项目优化"><a href="#Vue-cli3-0-项目优化" class="headerlink" title="Vue-cli3.0 项目优化"></a>Vue-cli3.0 项目优化</h1><h2 id="一-项目优化策略"><a href="#一-项目优化策略" class="headerlink" title="一. 项目优化策略"></a>一. 项目优化策略</h2><ol>
<li><p>生成打包报告</p>
</li>
<li><p>第三方库启用 CDN </p>
</li>
<li><p>ui 组件按需加载</p>
</li>
<li><p>路由懒加载</p>
</li>
<li><p>首屏内容定制</p>
</li>
</ol>
<h2 id="二-项目添加-nprogress-进度条"><a href="#二-项目添加-nprogress-进度条" class="headerlink" title="二. 项目添加 nprogress 进度条"></a>二. 项目添加 nprogress 进度条</h2><ol>
<li>安装依赖包 </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add nprogress -S </span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在main.js 中导入依赖包和样式 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> NProgress <span class="keyword">from</span> <span class="string">&#x27;nprogress&#x27;</span> </span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;nprogress/nprogress.css&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在axios请求拦截器和响应拦截器中配置启动和结束</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// axios 请求拦截</span></span><br><span class="line">axios.interceptors.request.use(<span class="function"><span class="keyword">function</span> (<span class="params">config</span>) </span>&#123;</span><br><span class="line">  NProgress.start()</span><br><span class="line">  <span class="keyword">return</span> config</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// axios 响应拦截</span></span><br><span class="line">axios.interceptors.response.use(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">  NProgress.done()</span><br><span class="line">  <span class="keyword">return</span> response</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="三-自动移除-console-log"><a href="#三-自动移除-console-log" class="headerlink" title="三. 自动移除 console.log"></a>三. 自动移除 console.log</h2><ol>
<li>安装依赖包  </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add babel-plugin-transform-remove-console -D </span><br></pre></td></tr></table></figure>
<ol start="2">
<li>在 .babelrc  | babel.config.js 文件中配置 plugins 插件 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> prodPlugins = []</span><br><span class="line"><span class="comment">// 生产环境移除console</span></span><br><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line">  prodPlugins.push(<span class="string">&#x27;transform-remove-console&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="string">&#x27;presets&#x27;</span>: [</span><br><span class="line">    <span class="string">&#x27;@vue/app&#x27;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;import&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="string">&#x27;libraryName&#x27;</span>: <span class="string">&#x27;vant&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;libraryDirectory&#x27;</span>: <span class="string">&#x27;es&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;style&#x27;</span>: <span class="literal">true</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="string">&#x27;vant&#x27;</span></span><br><span class="line">    ],</span><br><span class="line">    ...prodPlugins</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="四-生成打包报告"><a href="#四-生成打包报告" class="headerlink" title="四. 生成打包报告"></a>四. 生成打包报告</h2><ol>
<li>直接在命令行添加参数  </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue-cli-service build --report</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过可视化的 ui 面板查看报告（推荐）</li>
</ol>
<p>  在可视化的ui面板中，通过<em><strong>控制台</strong></em>和<em><strong>分析</strong></em>面板， 可以方便的查看存在的问题</p>
<h2 id="五-vue-cli3-0-webpack全局配置-vue-config-js"><a href="#五-vue-cli3-0-webpack全局配置-vue-config-js" class="headerlink" title="五. vue-cli3.0 webpack全局配置 vue.config.js"></a>五. vue-cli3.0 webpack全局配置 vue.config.js</h2><p><a target="_blank" rel="noopener" href="https://cli.vuejs.org/zh/config">https://cli.vuejs.org/zh/config</a></p>
<h2 id="六-为开发模式与发布模式设置不同的打包入口"><a href="#六-为开发模式与发布模式设置不同的打包入口" class="headerlink" title="六. 为开发模式与发布模式设置不同的打包入口"></a>六. 为开发模式与发布模式设置不同的打包入口</h2><ol>
<li><p>配置开发入口文件 src/main-dev.js 和发布模式入口文件 src/main-prod.js</p>
</li>
<li><p>通过 configureWebpack 或者 chainWebpack  来修改默认的配置</p>
</li>
</ol>
<p>  configureWebpack 通过对象形式操作</p>
<p>  chainWebpack        通过链式形式操作</p>
<ol start="3">
<li>在 vue.config.js 文件中通过 chainWebpack 修改入口文件  </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">chainWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 发布模式</span></span><br><span class="line">    config.when(process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      config</span><br><span class="line">        .entry(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">        .clear()</span><br><span class="line">        .add(<span class="string">&#x27;./src/main-prod.js&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="comment">// 开发模式</span></span><br><span class="line">    config.when(process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">      config</span><br><span class="line">        .entry(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">        .clear()</span><br><span class="line">        .add(<span class="string">&#x27;./src/main-dev.js&#x27;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="七-通过-externals-加载外部-CDN-资源"><a href="#七-通过-externals-加载外部-CDN-资源" class="headerlink" title="七. 通过 externals 加载外部 CDN 资源"></a>七. 通过 externals 加载外部 CDN 资源</h2><ol>
<li>配置 vue.config.js </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="attr">chainWebpack</span>: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 发布模式</span></span><br><span class="line">  config.when(process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config</span><br><span class="line">      .entry(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">      .clear()</span><br><span class="line">      .add(<span class="string">&#x27;./src/main-prod.js&#x27;</span>)</span><br><span class="line">    config</span><br><span class="line">      .set(<span class="string">&#x27;externals&#x27;</span>, &#123;</span><br><span class="line">       	<span class="attr">vant</span>: <span class="string">&#x27;Vant&#x27;</span></span><br><span class="line">        <span class="attr">vue</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue-router&#x27;</span>: <span class="string">&#x27;VueRouter&#x27;</span>,</span><br><span class="line">        <span class="attr">axios</span>: <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">        <span class="attr">nprogress</span>: <span class="string">&#x27;NProgress&#x27;</span>,</span><br><span class="line">        <span class="attr">moment</span>: <span class="string">&#x27;moment&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 开发模式</span></span><br><span class="line">  config.when(process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config</span><br><span class="line">      .entry(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">      .clear()</span><br><span class="line">      .add(<span class="string">&#x27;./src/main-dev.js&#x27;</span>)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>在 index.html 文件中引入 CDN服务依赖文件  </p>
<p><a target="_blank" rel="noopener" href="http://www.staticfile.org/">http://www.staticfile.org/</a></p>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- nprogress 的样式表文件 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot;</span> /&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- vant 的样式表文件 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vant@2.1/lib/index.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/vue/2.5.22/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/vue-router/3.0.1/vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/axios/0.18.0/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- nprogress 的 js 文件 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- moment 的 js 文件 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/moment.js/2.24.0/moment.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!-- vant 的 js 文件 --&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vant@2.1/lib/vant.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"> ps: vant ui  引入CDN文件之后，可以直接去掉 按需引入</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="八-首页内容定制"><a href="#八-首页内容定制" class="headerlink" title="八. 首页内容定制"></a>八. 首页内容定制</h2><ol>
<li>配置 vue.config.js </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">chainWebpack: <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 发布模式</span></span><br><span class="line">  config.when(process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 配置入口文件</span></span><br><span class="line">    config</span><br><span class="line">      .entry(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">      .clear()</span><br><span class="line">      .add(<span class="string">&#x27;./src/main-prod.js&#x27;</span>)</span><br><span class="line">    <span class="comment">// 配置CDN</span></span><br><span class="line">    config</span><br><span class="line">      .set(<span class="string">&#x27;externals&#x27;</span>, &#123;</span><br><span class="line">      	<span class="attr">vant</span>: <span class="string">&#x27;Vant&#x27;</span></span><br><span class="line">        <span class="attr">vue</span>: <span class="string">&#x27;Vue&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;vue-router&#x27;</span>: <span class="string">&#x27;VueRouter&#x27;</span>,</span><br><span class="line">        <span class="attr">axios</span>: <span class="string">&#x27;axios&#x27;</span>,</span><br><span class="line">        <span class="attr">nprogress</span>: <span class="string">&#x27;NProgress&#x27;</span>,</span><br><span class="line">        <span class="attr">moment</span>: <span class="string">&#x27;moment&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">    <span class="comment">// 配置首页定制</span></span><br><span class="line">    config.plugin(<span class="string">&#x27;html&#x27;</span>).tap(<span class="function"><span class="params">args</span> =&gt;</span> &#123;</span><br><span class="line">      args[<span class="number">0</span>].isProd = <span class="literal">true</span></span><br><span class="line">      <span class="keyword">return</span> args</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="comment">// 开发模式</span></span><br><span class="line">  config.when(process.env.NODE_ENV === <span class="string">&#x27;development&#x27;</span>, <span class="function"><span class="params">config</span> =&gt;</span> &#123;</span><br><span class="line">    config</span><br><span class="line">      .entry(<span class="string">&#x27;app&#x27;</span>)</span><br><span class="line">      .clear()</span><br><span class="line">      .add(<span class="string">&#x27;./src/main-dev.js&#x27;</span>)</span><br><span class="line">    <span class="comment">// 配置首页定制</span></span><br><span class="line">    config.plugin(<span class="string">&#x27;html&#x27;</span>).tap(<span class="function"><span class="params">args</span> =&gt;</span> &#123;</span><br><span class="line">      args[<span class="number">0</span>].isProd = <span class="literal">false</span></span><br><span class="line">      <span class="keyword">return</span> args</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在index.html中通过流程控制 是否加载CDN资源</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>&lt;%= htmlWebpackPlugin.options.isProd ? &#x27;&#x27; : &#x27;dev - &#x27; %&gt;mall-vue<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">&lt;% if(htmlWebpackPlugin.options.isProd)&#123; %&gt;</span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>vue-ssr<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- nprogress 的样式表文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css&quot;</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- vant 的样式表文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vant@2.1/lib/index.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/vue/2.5.22/vue.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/vue-router/3.0.1/vue-router.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/axios/0.18.0/axios.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- nprogress 的 js 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- moment 的 js 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.staticfile.org/moment.js/2.24.0/moment.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- vant 的 js 文件 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/vant@2.1/lib/vant.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&lt;%&#125;%&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="九-实现路由懒加载"><a href="#九-实现路由懒加载" class="headerlink" title="九. 实现路由懒加载"></a>九. 实现路由懒加载</h2><ol>
<li>安装依赖包  </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add @babel/plugin-syntax-dynamic-import -D </span><br></pre></td></tr></table></figure>

<ol start="2">
<li>配置 babel.config.js </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="string">&#x27;@babel/plugin-syntax-dynamic-import&#x27;</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>按需加载路由组件 </li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> About = <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;./views/About.vue&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-小程序技术栈整合"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2022/01/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E6%9C%AF%E6%A0%88%E6%95%B4%E5%90%88/"
    >小程序技术栈整合</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2022/01/05/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8A%80%E6%9C%AF%E6%A0%88%E6%95%B4%E5%90%88/" class="article-date">
  <time datetime="2022-01-05T08:28:34.000Z" itemprop="datePublished">2022-01-05</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="小程序技术栈整合"><a href="#小程序技术栈整合" class="headerlink" title="小程序技术栈整合"></a>小程序技术栈整合</h1><h2 id="一、-mpvue配置"><a href="#一、-mpvue配置" class="headerlink" title="一、 mpvue配置"></a>一、 mpvue配置</h2><ol>
<li>全局安装 vue-cli  </li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install --global vue-cli@2.9.6</span><br><span class="line"></span><br><span class="line">如果已经装了这个 2.9.6 可以不装了</span><br><span class="line"></span><br><span class="line">npm install @vue/cli-init -g </span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>创建一个基于 mpvue-quickstart 模板的新项目</p>
<p>新手一路回车选择默认就可以了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue init mpvue/mpvue-quickstart my-project</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="二、-mpvue中配置-vant-weapp"><a href="#二、-mpvue中配置-vant-weapp" class="headerlink" title="二、 mpvue中配置 vant-weapp"></a>二、 mpvue中配置 vant-weapp</h2><ol>
<li>下载 vant-weapp 资源  </li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/youzan/vant-weapp.git</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>将dist目录下的所有文件复制到你项目的/static/vant/目录下 </li>
</ol>
<p>  注意打开 微信开发者工具中的ES6转ES5功能 </p>
<ol start="3">
<li>在需要引入的页面目录下的main.json文件中</li>
</ol>
  <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;usingComponents&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;van-button&quot;</span>: <span class="string">&quot;/static/vant/button/index&quot;</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>使用</li>
</ol>
  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">van-button</span>&gt;</span>测试<span class="tag">&lt;/<span class="name">van-button</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="三、-mpvue中配置-flyio"><a href="#三、-mpvue中配置-flyio" class="headerlink" title="三、 mpvue中配置 flyio"></a>三、 mpvue中配置 flyio</h2><ol>
<li>安装 flyio  </li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yarn add flyio -S  </span><br></pre></td></tr></table></figure>
<ol start="2">
<li>新建文件 src/api/fly.js    </li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Fly <span class="keyword">from</span> <span class="string">&#x27;flyio/dist/npm/wx&#x27;</span></span><br><span class="line"><span class="keyword">const</span> fly = <span class="keyword">new</span> Fly()</span><br><span class="line"><span class="keyword">const</span> host = <span class="string">&#x27;http://127.0.0.1:5000/&#x27;</span></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">fly.interceptors.request.use(</span><br><span class="line">  <span class="function">(<span class="params">request</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.showLoading(&#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&#x27;加载中&#x27;</span>,</span><br><span class="line">      <span class="attr">mask</span>: <span class="literal">true</span></span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="built_in">console</span>.log(request)</span><br><span class="line">    <span class="comment">// request.headers[&quot;X-Tag&quot;] = &quot;flyio&quot;;</span></span><br><span class="line">    <span class="comment">// request.headers[&#x27;content-type&#x27;]= &#x27;application/json&#x27;;</span></span><br><span class="line">    request.headers = &#123;</span><br><span class="line">      <span class="string">&#x27;X-Tag&#x27;</span>: <span class="string">&#x27;flyio&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> authParams = &#123;</span><br><span class="line">      <span class="comment">// 公共参数</span></span><br><span class="line">      <span class="string">&#x27;categoryType&#x27;</span>: <span class="string">&#x27;SaleGoodsType@sim&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;streamNo&#x27;</span>: <span class="string">&#x27;wxapp153570682909641893&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;reqSource&#x27;</span>: <span class="string">&#x27;MALL_H5&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;appid&#x27;</span>: <span class="string">&#x27;string&#x27;</span>,</span><br><span class="line">      <span class="string">&#x27;timestamp&#x27;</span>: <span class="keyword">new</span> <span class="built_in">Date</span>().getTime(),</span><br><span class="line">      <span class="string">&#x27;sign&#x27;</span>: <span class="string">&#x27;string&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    request.body &amp;&amp; <span class="built_in">Object</span>.keys(request.body).forEach(<span class="function">(<span class="params">val</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (request.body[val] === <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">        <span class="keyword">delete</span> request.body[val]</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;)</span><br><span class="line">    request.body = &#123;</span><br><span class="line">      ...request.body,</span><br><span class="line">      ...authParams</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> request</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">fly.interceptors.response.use(<span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">  wx.hideLoading()</span><br><span class="line">  <span class="keyword">return</span> response.data<span class="comment">// 请求成功之后将返回值返回</span></span><br><span class="line">&#125;, <span class="function"><span class="params">err</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 请求出错，根据返回状态码判断出错原因</span></span><br><span class="line">  <span class="built_in">console</span>.log(err)</span><br><span class="line">  wx.hideLoading()</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;请求失败&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">fly.config.baseURL = host</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> fly</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ol start="3">
<li>将fly.js引入main.js然后直接挂载到vue原型上</li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> fly <span class="keyword">from</span> <span class="string">&#x27;./api/fly&#x27;</span></span><br><span class="line">Vue.prototype.$fly = fly</span><br></pre></td></tr></table></figure>

<h2 id="四、使用Promise封装小程序网络请求"><a href="#四、使用Promise封装小程序网络请求" class="headerlink" title="四、使用Promise封装小程序网络请求"></a>四、使用Promise封装小程序网络请求</h2><h3 id="方式1"><a href="#方式1" class="headerlink" title="方式1"></a>方式1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 基于Promise的网络请求库, 包含GET POST请求</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.使用方法：</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.先引入： import &#123; get, post,... &#125; from 本文件;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.get请求: get(&quot;/index&quot;, &#123; id: 2 &#125;).then(data =&gt; &#123; &#125;).catch(error =&gt; &#123; &#125;);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. post请求: post(&quot;/index&quot;, &#123; id: 2 &#125;).then(data =&gt; &#123; &#125;).catch(error =&gt; &#123; &#125;);</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/* 服务器请求地址 */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> domain = <span class="string">&#x27;http://203.195.181.208:8888/&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 发起get请求</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>url 请求路径 必填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>data 请求参数 get请求的参数会自动拼到地址后面</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>headers 请求头 选填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> get = <span class="function">(<span class="params">url, data, headers</span>) =&gt;</span> request(<span class="string">&#x27;GET&#x27;</span>, url, data, headers);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 发起post请求</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>url 请求路径 必填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>data 请求参数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>headers 请求头 选填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> post = <span class="function">(<span class="params">url, data, headers</span>) =&gt;</span> request(<span class="string">&#x27;POST&#x27;</span>, url, data, headers);</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* 接口请求基类方法</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>method 请求方法 必填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>url 请求路径 必填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>data 请求参数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@param </span>header 请求头 选填</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">* <span class="doctag">@returns <span class="type">&#123;Promise&#125;</span></span></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">method, url, data, header = &#123;</span></span></span><br><span class="line"><span class="params"><span class="function"></span></span></span><br><span class="line"><span class="params"><span class="function">  <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span></span></span></span><br><span class="line"><span class="params"><span class="function"></span></span></span><br><span class="line"><span class="params"><span class="function">&#125;</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 请求之前提示加载中</span></span><br><span class="line">  wx.showLoading(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;加载中...&#x27;</span></span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> response = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">    url = domain + url;</span><br><span class="line"></span><br><span class="line">    wx.request(&#123;</span><br><span class="line"></span><br><span class="line">      url,</span><br><span class="line"></span><br><span class="line">      method,</span><br><span class="line"></span><br><span class="line">      data,</span><br><span class="line"></span><br><span class="line">      header,</span><br><span class="line"></span><br><span class="line">      <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> response.success = res,</span><br><span class="line"></span><br><span class="line">      <span class="attr">fail</span>: <span class="function">(<span class="params">error</span>) =&gt;</span> response.fail = error,</span><br><span class="line"></span><br><span class="line">      <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line"></span><br><span class="line">        wx.hideLoading();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (response.success) &#123;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span> (response.success.statusCode != <span class="number">200</span>) &#123;</span><br><span class="line"></span><br><span class="line">            wx.showToast(&#123;</span><br><span class="line"></span><br><span class="line">              <span class="attr">title</span>: <span class="string">&quot;网络出错，稍后再试&quot;</span>,</span><br><span class="line"></span><br><span class="line">              <span class="attr">icon</span>: <span class="string">&quot;none&quot;</span></span><br><span class="line"></span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          resolve(response.success.data);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">          wx.showToast(&#123;</span><br><span class="line"></span><br><span class="line">            <span class="attr">title</span>: <span class="string">&quot;数据请求失败，请稍后重试&quot;</span>,</span><br><span class="line"></span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&quot;none&quot;</span></span><br><span class="line"></span><br><span class="line">          &#125;);</span><br><span class="line"></span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">&#x27;数据请求失败&#x27;</span>, response.fail)</span><br><span class="line"></span><br><span class="line">          reject(response.fail);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="方式2"><a href="#方式2" class="headerlink" title="方式2"></a>方式2</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = getApp()</span><br><span class="line"><span class="comment">// const host = &#x27;http://127.0.0.1:3000&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> request = <span class="function">(<span class="params">url, options</span>) =&gt;</span> &#123;</span><br><span class="line">   <span class="comment">// 请求之前提示加载中</span></span><br><span class="line">  wx.showLoading(&#123;<span class="attr">title</span>: <span class="string">&#x27;加载中...&#x27;</span>&#125;)</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    wx.request(&#123;</span><br><span class="line">      <span class="attr">url</span>: <span class="string">`<span class="subst">$&#123;app.globalData.baseURL&#125;</span><span class="subst">$&#123;url&#125;</span>`</span>,</span><br><span class="line">      <span class="comment">// url: host + url,</span></span><br><span class="line">      <span class="attr">method</span>: options.method,</span><br><span class="line">      <span class="attr">data</span>: options.method === <span class="string">&#x27;GET&#x27;</span> ? options.data : <span class="built_in">JSON</span>.stringify(options.data),</span><br><span class="line">      <span class="attr">header</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;application/json; charset=UTF-8&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;x-token&#x27;</span>: <span class="string">&#x27;x-token&#x27;</span>  <span class="comment">// 看自己是否需要</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="attr">success</span>: resolve,</span><br><span class="line">      <span class="attr">fail</span>: reject,</span><br><span class="line">      <span class="comment">// success(request) &#123;</span></span><br><span class="line">      <span class="comment">//   // console.log(request)</span></span><br><span class="line">      <span class="comment">//   if (request.statusCode === 200) &#123;</span></span><br><span class="line">      <span class="comment">//     resolve(request.data)</span></span><br><span class="line">      <span class="comment">//   &#125; else &#123;</span></span><br><span class="line">      <span class="comment">//     reject(request.data)</span></span><br><span class="line">      <span class="comment">//   &#125;</span></span><br><span class="line">      <span class="comment">// &#125;,</span></span><br><span class="line">      <span class="comment">// fail(error) &#123;</span></span><br><span class="line">      <span class="comment">//   reject(error.data)</span></span><br><span class="line">      <span class="comment">// &#125;</span></span><br><span class="line">      <span class="function"><span class="title">complete</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      	wx.hideLoading()</span><br><span class="line">    	&#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> get = <span class="function">(<span class="params">url, options = &#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> request(url, &#123; <span class="attr">method</span>: <span class="string">&#x27;GET&#x27;</span>, <span class="attr">data</span>: options &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> post = <span class="function">(<span class="params">url, options</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> request(url, &#123; <span class="attr">method</span>: <span class="string">&#x27;POST&#x27;</span>, <span class="attr">data</span>: options &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> put = <span class="function">(<span class="params">url, options</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> request(url, &#123; <span class="attr">method</span>: <span class="string">&#x27;PUT&#x27;</span>, <span class="attr">data</span>: options &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不能声明DELETE（关键字）</span></span><br><span class="line"><span class="keyword">const</span> remove = <span class="function">(<span class="params">url, options</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> request(url, &#123; <span class="attr">method</span>: <span class="string">&#x27;DELETE&#x27;</span>, <span class="attr">data</span>: options &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  get,</span><br><span class="line">  post,</span><br><span class="line">  put,</span><br><span class="line">  remove</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure> 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-storage二次封装"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/12/31/storage%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/"
    >storage二次封装</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/12/31/storage%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/" class="article-date">
  <time datetime="2021-12-31T12:39:31.000Z" itemprop="datePublished">2021-12-31</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Storage二次封装</span></span><br><span class="line"><span class="keyword">const</span> namespace = <span class="string">&#x27;mall&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// 存</span></span><br><span class="line">  <span class="function"><span class="title">setItem</span>(<span class="params">key, val</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> storage = <span class="built_in">this</span>.getStorage()</span><br><span class="line">    storage[key] = val</span><br><span class="line">    <span class="built_in">window</span>.localStorage.setItem(namespace, <span class="built_in">JSON</span>.stringify(storage))</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 取</span></span><br><span class="line">  <span class="function"><span class="title">getItem</span>(<span class="params">key</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.getStorage()[key]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 取所有</span></span><br><span class="line">  <span class="function"><span class="title">getStorage</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">JSON</span>.parse(<span class="built_in">window</span>.localStorage.getItem(namespace) || <span class="string">&quot;&#123;&#125;&quot;</span>)</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 删</span></span><br><span class="line">  <span class="function"><span class="title">clearItem</span>(<span class="params">key</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> storage = <span class="built_in">this</span>.getStorage()</span><br><span class="line">    <span class="keyword">delete</span> storage[key]</span><br><span class="line">    <span class="built_in">window</span>.localStorage.setItem(namespace, <span class="built_in">JSON</span>.stringify(storage))</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 清空所有</span></span><br><span class="line">  <span class="function"><span class="title">clearAll</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.localStorage.clear(namespace, <span class="string">&#x27;&#123;&#125;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-rem适配方案"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/12/31/rem%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88/"
    >Rem适配方案</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/12/31/rem%E9%80%82%E9%85%8D%E6%96%B9%E6%A1%88/" class="article-date">
  <time datetime="2021-12-31T12:30:31.000Z" itemprop="datePublished">2021-12-31</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="1-直接引入-rem-js-文件"><a href="#1-直接引入-rem-js-文件" class="headerlink" title="1. 直接引入 rem.js 文件"></a>1. 直接引入 rem.js 文件</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// var devicePixelRatio = 1;</span></span><br><span class="line">  <span class="comment">// var scale = 1 / devicePixelRatio;</span></span><br><span class="line">  <span class="comment">// document.querySelector(&#x27;meta[name=&quot;viewport&quot;]&#x27;).setAttribute(&#x27;content&#x27;,&#x27;initial-scale=&#x27; + scale + &#x27;, maximum-scale=&#x27; + scale + &#x27;, minimum-scale=&#x27; + scale + &#x27;, user-scalable=no&#x27;);</span></span><br><span class="line">  <span class="comment">// 7.5根据设计稿的横向分辨率/100得来</span></span><br><span class="line">  <span class="comment">// alert(document.documentElement.clientWidth)</span></span><br><span class="line">  <span class="keyword">var</span> deviceWidth = <span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line">  <span class="comment">// var deviceWidth = window.screen.availWidth</span></span><br><span class="line">  <span class="comment">// alert(navigator.userAgent)</span></span><br><span class="line">  <span class="comment">// alert(deviceWidth)</span></span><br><span class="line">  <span class="comment">// console.log(navigator.userAgent)</span></span><br><span class="line">  <span class="keyword">if</span> (deviceWidth &gt; <span class="number">750</span>) &#123;</span><br><span class="line">    <span class="comment">// deviceWidth = 750;</span></span><br><span class="line">    deviceWidth = <span class="number">7.5</span> * <span class="number">50</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.documentElement.style.fontSize = deviceWidth / <span class="number">7.5</span> + <span class="string">&#x27;px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 禁止双击放大</span></span><br><span class="line">  <span class="built_in">document</span>.documentElement.addEventListener(<span class="string">&#x27;touchstart&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (event.touches.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="literal">false</span>);</span><br><span class="line">  <span class="keyword">var</span> lastTouchEnd = <span class="number">0</span>;</span><br><span class="line">  <span class="built_in">document</span>.documentElement.addEventListener(<span class="string">&#x27;touchend&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> now = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">if</span> (now - lastTouchEnd &lt;= <span class="number">300</span>) &#123;</span><br><span class="line">      event.preventDefault();</span><br><span class="line">    &#125;</span><br><span class="line">    lastTouchEnd = now;</span><br><span class="line">  &#125;, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2-淘宝的适配方案"><a href="#2-淘宝的适配方案" class="headerlink" title="2. 淘宝的适配方案"></a>2. 淘宝的适配方案</h2><ol>
<li>安装依赖包  </li>
</ol>
  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">yarn add lib-flexible -S   </span><br><span class="line"></span><br><span class="line">yarn add  postcss-px2rem -S  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>在main.js 文件中引入  </li>
</ol>
  <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib-flexible&#x27;</span></span><br></pre></td></tr></table></figure>

<ol start="3">
<li>在vue.config.js 文件中配置 css 属性</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">        <span class="attr">loaderOptions</span>: &#123;</span><br><span class="line">            <span class="attr">css</span>: &#123;&#125;,</span><br><span class="line">            <span class="attr">postcss</span>: &#123;</span><br><span class="line">                <span class="attr">plugins</span>: [</span><br><span class="line">                    <span class="built_in">require</span>(<span class="string">&#x27;postcss-px2rem&#x27;</span>)(&#123;</span><br><span class="line">                        <span class="attr">remUnit</span>: <span class="number">37.5</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-typescript"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/12/27/typescript/"
    >TypeScript</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/12/27/typescript/" class="article-date">
  <time datetime="2021-12-27T12:05:31.000Z" itemprop="datePublished">2021-12-27</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h1 id="typescript"><a href="#typescript" class="headerlink" title="typescript"></a>typescript</h1><h2 id="1-环境配置"><a href="#1-环境配置" class="headerlink" title="1. 环境配置"></a>1. 环境配置</h2><h3 id="1-1-安装typescript"><a href="#1-1-安装typescript" class="headerlink" title="1.1 安装typescript"></a>1.1 安装typescript</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm i typescript -g </span><br><span class="line">tsc -v  </span><br></pre></td></tr></table></figure>
<h3 id="1-2-编译ts"><a href="#1-2-编译ts" class="headerlink" title="1.2 编译ts"></a>1.2 编译ts</h3><h4 id="1-2-1-命令编译"><a href="#1-2-1-命令编译" class="headerlink" title="1.2.1 命令编译"></a>1.2.1 命令编译</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc index.ts  </span><br></pre></td></tr></table></figure>

<h4 id="1-2-2-vscode-编译"><a href="#1-2-2-vscode-编译" class="headerlink" title="1.2.2 vscode 编译"></a>1.2.2 vscode 编译</h4><ol>
<li>初始化ts配置 </li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tsc --init </span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改tsconfig.json 配置  </li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;commonjs&quot;</span>, </span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span>: <span class="string">&quot;./js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>点击 <strong>终端</strong> –&gt; <strong>运行生成任务</strong></p>
<p><img src="./images/run.png"></p>
</li>
</ol>
<h2 id="2-变量和数据类型"><a href="#2-变量和数据类型" class="headerlink" title="2. 变量和数据类型"></a>2. 变量和数据类型</h2><h3 id="2-1-变量"><a href="#2-1-变量" class="headerlink" title="2.1 变量"></a>2.1 变量</h3><ul>
<li>变量语法  </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// let 变量名: 变量类型 = 值  </span></span><br><span class="line"><span class="keyword">let</span> str: string = <span class="string">&#x27;fly&#x27;</span>  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><p>PS</p>
<p>在ts中，为变量指定了类型，就只能给该变量设置相同类型的值</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: string = <span class="string">&#x27;fly&#x27;</span></span><br><span class="line"></span><br><span class="line">str = <span class="number">1</span> <span class="comment">// 报错 Type &#x27;1&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-数据类型"><a href="#2-2-数据类型" class="headerlink" title="2.2 数据类型"></a>2.2 数据类型</h3><ul>
<li><p>原有类型</p>
<p>string、number、boolean、Array、null、undefined、Symbol、Object 、function</p>
</li>
<li><p>新增类型 </p>
<p>tupel元组 enum枚举 any任意类型 never void  </p>
</li>
</ul>
<h4 id="2-2-1-undefined-类型"><a href="#2-2-1-undefined-类型" class="headerlink" title="2.2.1 undefined 类型"></a>2.2.1 undefined 类型</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: <span class="literal">undefined</span> = <span class="literal">undefined</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-2-string-类型"><a href="#2-2-2-string-类型" class="headerlink" title="2.2.2 string 类型"></a>2.2.2 string 类型</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: string = <span class="string">&#x27;fly&#x27;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-3-number-类型"><a href="#2-2-3-number-类型" class="headerlink" title="2.2.3 number 类型"></a>2.2.3 number 类型</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str: number = <span class="number">1</span> </span><br></pre></td></tr></table></figure>
<h4 id="2-2-4-boolean-类型"><a href="#2-2-4-boolean-类型" class="headerlink" title="2.2.4 boolean 类型"></a>2.2.4 boolean 类型</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ts中的布尔类型只能是true或者false</span></span><br><span class="line"><span class="keyword">let</span> str: boolean = <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h4 id="2-2-5-Array-类型"><a href="#2-2-5-Array-类型" class="headerlink" title="2.2.5 Array 类型"></a>2.2.5 Array 类型</h4><ul>
<li>使用方式 </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1: let 数组变量名:数据类型[] = [值1,值2]</span></span><br><span class="line"><span class="keyword">var</span> arr: number[]= [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2: let 数组变量名:Array&lt;类型&gt; = [值1,值2]</span></span><br><span class="line"><span class="keyword">var</span> arr: <span class="built_in">Array</span>&lt;number&gt;= [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><p>特点</p>
<p>元素类型固定</p>
<p>长度不限制</p>
</li>
</ul>
<h4 id="2-2-6-tupel-元组-类型"><a href="#2-2-6-tupel-元组-类型" class="headerlink" title="2.2.6 tupel(元组) 类型"></a>2.2.6 tupel(元组) 类型</h4><ul>
<li><p>概念</p>
<p>一个规定了元素数量和每个元素类型的”数组“，而每个元素的类型可以不相同。</p>
</li>
<li><p>使用方式 </p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1: let 元组名:[类型1,类型2,类型3] = [值1,值2,值3]</span></span><br><span class="line"><span class="keyword">let</span> arr: [string, number, boolean] = [<span class="string">&#x27;fly&#x27;</span>, <span class="number">18</span>, <span class="literal">true</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li><p>为什么需要元组？</p>
<p>TS中数组元素类型必须一致，如果需要不同元素，可以使用<em><strong>元组</strong></em>。</p>
</li>
<li><p>特点</p>
<p>声明时，需要制定元素的个数</p>
<p>声明时，需要为每个元素设置类型</p>
</li>
</ul>
<h4 id="2-2-7-enum-枚举-类型"><a href="#2-2-7-enum-枚举-类型" class="headerlink" title="2.2.7 enum(枚举) 类型"></a>2.2.7 enum(枚举) 类型</h4><ul>
<li><p>问题：性别标识 男（1），女（2），未知（3）</p>
</li>
<li><p>使用方式 </p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1   </span></span><br><span class="line">  enum Sex &#123;</span><br><span class="line">  Boy=<span class="number">0</span>,</span><br><span class="line">  Girl=<span class="number">1</span>,</span><br><span class="line">  Unknown=<span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 方式2,枚举值会自动从0开始生成</span></span><br><span class="line"> enum Sex &#123;</span><br><span class="line">  Boy,</span><br><span class="line">  Girl,</span><br><span class="line">  Unknown</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(Sex)</span><br><span class="line"><span class="comment">// 使用枚举</span></span><br><span class="line"><span class="keyword">let</span> fly: Sex = Sex.Boy</span><br><span class="line"><span class="built_in">console</span>.log(fly)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="2-2-8-any-类型"><a href="#2-2-8-any-类型" class="headerlink" title="2.2.8 any 类型"></a>2.2.8 any 类型</h4><ul>
<li><p>概念</p>
<p>any 代表任意类型，一般在获取DOM的时候使用</p>
</li>
<li><p>使用示例 </p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> textName: any = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;txtName&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-2-9-void-类型"><a href="#2-2-9-void-类型" class="headerlink" title="2.2.9 void 类型"></a>2.2.9 void 类型</h4><ul>
<li><p>概念</p>
<p>void 代表没有类型，一般用于无返回类型的函数中</p>
</li>
<li><p>使用示例 </p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 没有返回值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 返回string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>): <span class="title">string</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;str&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(show())</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-2-10-never-类型"><a href="#2-2-10-never-类型" class="headerlink" title="2.2.10 never 类型"></a>2.2.10 never 类型</h4><ul>
<li><p>概念</p>
<p>never代表不存在的值的类型，一般用于抛出异常或者无限循环的 函数返回类型</p>
</li>
<li><p>使用示例 </p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 死循环</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 抛出异常</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params"></span>): <span class="title">never</span> </span>&#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;err&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li><p>PS </p>
<p>never类型是ts中的底部类型，所有类型都是never的子类型，所有never类型可以赋值给任意类型</p>
</li>
</ul>
<h4 id="2-2-11-联合类型"><a href="#2-2-11-联合类型" class="headerlink" title="2.2.11 联合类型"></a>2.2.11 联合类型</h4><ul>
<li><p>概念</p>
<p>联合类型（Union Types）可以通过管道(|)将变量设置多种类型，赋值时可以根据设置的类型来赋值。</p>
<p>注意：只能赋值指定的类型，如果赋值其它类型就会报错。</p>
</li>
<li><p>使用示例 </p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> val:string|number </span><br><span class="line">val = <span class="number">12</span> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;数字为 &quot;</span>+ val) </span><br><span class="line">val = <span class="string">&quot;Runoob&quot;</span> </span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&quot;字符串为 &quot;</span> + val)</span><br></pre></td></tr></table></figure>

<h3 id="2-3-类型推论"><a href="#2-3-类型推论" class="headerlink" title="2.3 类型推论"></a>2.3 类型推论</h3><ul>
<li><p>概念</p>
<p>ts 会在没有明确的指定类型的时候推测出一个类型，这就是类型推论</p>
</li>
<li><p>示例代码</p>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">&#x27;fly&#x27;</span></span><br><span class="line"><span class="comment">// 推断出a是string类型所有不能再赋值为number类型</span></span><br><span class="line">a = <span class="number">1</span> <span class="comment">// Type &#x27;1&#x27; is not assignable to type &#x27;string&#x27;.</span></span><br></pre></td></tr></table></figure>

<h2 id="3-ts-函数"><a href="#3-ts-函数" class="headerlink" title="3. ts 函数"></a>3. ts 函数</h2><h3 id="3-1-ts函数返回值和参数"><a href="#3-1-ts函数返回值和参数" class="headerlink" title="3.1 ts函数返回值和参数"></a>3.1 ts函数返回值和参数</h3><h4 id="3-1-1-返回值"><a href="#3-1-1-返回值" class="headerlink" title="3.1.1 返回值"></a>3.1.1 返回值</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params"></span>):返回值类型 </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> 变量名:变量类型 = 函数名()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="3-1-2-形参"><a href="#3-1-2-形参" class="headerlink" title="3.1.2 形参"></a>3.1.2 形参</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">形参<span class="number">1</span>:类型,形参<span class="number">2</span>:类型</span>):返回值类型 </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> 变量名:变量类型 = 函数名(实参<span class="number">1</span>,实参<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>小结<br>函数必须定义返回值类型，如果没有返回值类型，则定义返回值类型为void<br><em><strong>实参</strong></em> 和 <em><strong>形参</strong></em> 的 <em><strong>类型</strong></em> 保持一致<br><em><strong>实参</strong></em> 和 <em><strong>形参</strong></em> 的 <em><strong>数量</strong></em> 保持一致  </li>
</ul>
<h3 id="3-2-ts可选参数和默认参数及剩余参数"><a href="#3-2-ts可选参数和默认参数及剩余参数" class="headerlink" title="3.2 ts可选参数和默认参数及剩余参数"></a>3.2 ts可选参数和默认参数及剩余参数</h3><h4 id="3-2-1-可选参数"><a href="#3-2-1-可选参数" class="headerlink" title="3.2.1 可选参数"></a>3.2.1 可选参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">形参?:类型</span>):返回值类型 </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用可以不传参数  </span></span><br><span class="line">函数名()</span><br><span class="line"><span class="comment">// 调用传递参数  </span></span><br><span class="line">函数名(实参)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="3-2-2-默认参数"><a href="#3-2-2-默认参数" class="headerlink" title="3.2.2 默认参数"></a>3.2.2 默认参数</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">形参<span class="number">1</span>:类型=默认值<span class="number">1</span>,形参<span class="number">2</span>:类型=默认值<span class="number">2</span></span>):返回值类型 </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 调用可以不传参数  </span></span><br><span class="line">函数名()</span><br><span class="line"><span class="comment">// 调用传递1个参数  </span></span><br><span class="line">函数名(实参)</span><br><span class="line"><span class="comment">// 调用传递2个参数  </span></span><br><span class="line">函数名(实参<span class="number">1</span>,实参<span class="number">2</span>)</span><br><span class="line"><span class="comment">// 只传递第2个实参</span></span><br><span class="line">函数名(<span class="literal">undefined</span>,实参<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="3-2-3-剩余参数"><a href="#3-2-3-剩余参数" class="headerlink" title="3.2.3 剩余参数"></a>3.2.3 剩余参数</h4><ul>
<li>使用语法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> 函数名(<span class="params">形参<span class="number">1</span>:类型,形参<span class="number">2</span>:类型,...形参<span class="number">2</span>:类型[]</span>):<span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(a+b)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>示例代码 </li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">show</span>(<span class="params">x: number, y: number, ...rest: number[]</span>): <span class="title">void</span> </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> result: number = x + y</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> ele <span class="keyword">of</span> rest) &#123;</span><br><span class="line">    result += ele</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="built_in">console</span>.log(result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">show(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">show(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">4</span>,)</span><br><span class="line">  </span><br></pre></td></tr></table></figure>

<ul>
<li><p>PS </p>
<p>  剩余参数 只能 定义有一个<br>  剩余参数 只能 定义为数组<br>  剩余参数 只能 定义在形参列表最后</p>
</li>
</ul>
<h4 id="3-2-4-重载"><a href="#3-2-4-重载" class="headerlink" title="3.2.4 重载"></a>3.2.4 重载</h4><ul>
<li>使用语法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 上边是声明</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">arg1: string, arg2: string</span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">arg1: number, arg2: number</span>): <span class="title">number</span></span></span></span><br><span class="line"><span class="function"><span class="function"></span></span></span><br><span class="line"><span class="function"><span class="function">// 下边是实现</span></span></span><br><span class="line"><span class="function"><span class="function">//<span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">arg1: any, arg2: any</span>):<span class="title">any</span> </span>&#123;</span></span></span><br><span class="line"><span class="function"><span class="function">// 或者</span></span></span><br><span class="line"><span class="function"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">arg1: string | number, arg2: string | number</span>):<span class="title">any</span> </span>&#123;</span></span></span><br><span class="line"><span class="function"><span class="function">  // 在实现上我们要注意严格判断两个参数的类型是否相等</span></span></span><br><span class="line"><span class="function"><span class="function">  <span class="title">if</span> (<span class="params"><span class="keyword">typeof</span> arg1 === <span class="string">&#x27;string&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> arg2 === <span class="string">&#x27;string&#x27;</span></span>) </span>&#123;</span></span><br><span class="line"><span class="function">    <span class="title">return</span> <span class="title">arg1</span> + <span class="title">arg2</span></span></span><br><span class="line"><span class="function">  &#125; <span class="title">else</span> <span class="title">if</span> (<span class="params"><span class="keyword">typeof</span> arg1 === <span class="string">&#x27;number&#x27;</span> &amp;&amp; <span class="keyword">typeof</span> arg2 === <span class="string">&#x27;number&#x27;</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arg1 + arg2</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="string">&#x27;fly&#x27;</span>, <span class="string">&#x27;zs&#x27;</span>))</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>, <span class="number">2</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="4-ts-class（类）"><a href="#4-ts-class（类）" class="headerlink" title="4. ts class（类）"></a>4. ts class（类）</h2><p>封装、继承、多态 </p>
<h3 id="4-1-基本使用方式"><a href="#4-1-基本使用方式" class="headerlink" title="4.1 基本使用方式"></a>4.1 基本使用方式</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">age</span>: number</span><br><span class="line">  <span class="comment">// 构造函数</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 成员方法</span></span><br><span class="line">  say():<span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name, <span class="built_in">this</span>.age)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="string">&#x27;fly&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line">person.say()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="4-2-封装"><a href="#4-2-封装" class="headerlink" title="4.2 封装"></a>4.2 封装</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">age</span>: number</span><br><span class="line">  <span class="comment">// 构造函数</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 封装</span></span><br><span class="line">  getName(): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">  &#125;</span><br><span class="line">  setName(name: string): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person(<span class="string">&#x27;fly&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person.getName())</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h3 id="4-3-继承"><a href="#4-3-继承" class="headerlink" title="4.3 继承"></a>4.3 继承</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">age</span>: number</span><br><span class="line">  <span class="comment">// 构造函数</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 封装</span></span><br><span class="line">  getName(): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">  &#125;</span><br><span class="line">  setName(name: string): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZS</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> zs = <span class="keyword">new</span> ZS(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(zs.getName())</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="4-4-多态"><a href="#4-4-多态" class="headerlink" title="4.4 多态"></a>4.4 多态</h3><h4 id="4-4-1-基本使用"><a href="#4-4-1-基本使用" class="headerlink" title="4.4.1 基本使用"></a>4.4.1 基本使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">abstract <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">age</span>: number</span><br><span class="line">  <span class="comment">// 构造函数</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 封装</span></span><br><span class="line">  getName(): string &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.name</span><br><span class="line">  &#125;</span><br><span class="line">  setName(name: string): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//非抽象方法，无需要求子类实现、重写</span></span><br><span class="line">  <span class="function"><span class="title">sayHai</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;你好，&#x27;</span> + <span class="built_in">this</span>.getName() + <span class="string">&#x27;，qf你最胖&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  abstract run(): any</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZS</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//非抽象方法，无需要求子类实现、重写</span></span><br><span class="line">  <span class="function"><span class="title">sayHai</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;你好，&#x27;</span> + <span class="built_in">this</span>.getName() + <span class="string">&#x27;，qf你最骚&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  run(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.getName() + <span class="string">&#x27;跑起来&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> zs = <span class="keyword">new</span> ZS(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">zs.sayHai()</span><br><span class="line">zs.run()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LS</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//非抽象方法，无需要求子类实现、重写</span></span><br><span class="line">  <span class="function"><span class="title">sayHai</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&#x27;你好，&#x27;</span> + <span class="built_in">this</span>.getName() + <span class="string">&#x27;，qf你最骚&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  run(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.getName() + <span class="string">&#x27;飞起来&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ls = <span class="keyword">new</span> LS(<span class="string">&#x27;李四&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">ls.sayHai()</span><br><span class="line">ls.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="4-4-2-特点"><a href="#4-4-2-特点" class="headerlink" title="4.4.2 特点"></a>4.4.2 特点</h4><p>  抽象类不能够被实例化</p>
<p>  子类中必须定义对应的抽象方法</p>
<h3 id="4-5-类修饰符"><a href="#4-5-类修饰符" class="headerlink" title="4.5 类修饰符"></a>4.5 类修饰符</h3><h4 id="4-5-1-常用修饰符"><a href="#4-5-1-常用修饰符" class="headerlink" title="4.5.1 常用修饰符"></a>4.5.1 常用修饰符</h4><ul>
<li><p>public 公有类型： 在当前类里面、子类里面、外部类都可以访问</p>
</li>
<li><p>protected 保护类型：在当前类里面、子类里面可以访问，外部类无法访问</p>
</li>
<li><p>private 私有类型：在当前类里面可以访问，子类里面和外部类无法访问</p>
</li>
<li><p>ps: 如果不添加修饰符，默认为公有类型</p>
</li>
</ul>
<h4 id="4-5-2-实例代码"><a href="#4-5-2-实例代码" class="headerlink" title="4.5.2 实例代码"></a>4.5.2 实例代码</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  public name: string</span><br><span class="line">  protected age: number</span><br><span class="line">  private sex: string</span><br><span class="line">  <span class="comment">// 构造函数</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number, sex: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">    <span class="built_in">this</span>.sex = sex</span><br><span class="line">  &#125;</span><br><span class="line">  say(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZS</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number, sex: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name, age, sex)</span><br><span class="line">  &#125;</span><br><span class="line">  say(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.age + <span class="string">&#x27;111&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> zs = <span class="keyword">new</span> ZS(<span class="string">&#x27;zs&#x27;</span>, <span class="number">18</span>, <span class="string">&#x27;男&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="4-6-静态属性和静态方法"><a href="#4-6-静态属性和静态方法" class="headerlink" title="4.6 静态属性和静态方法"></a>4.6 静态属性和静态方法</h3><h4 id="4-6-1-基本使用"><a href="#4-6-1-基本使用" class="headerlink" title="4.6.1 基本使用"></a>4.6.1 基本使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  public name: string</span><br><span class="line">  protected age: number</span><br><span class="line">  private sex: string</span><br><span class="line">  <span class="keyword">static</span> staticName = <span class="string">&#x27;zs&#x27;</span></span><br><span class="line">  <span class="comment">// 构造函数</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number, sex: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">    <span class="built_in">this</span>.sex = sex</span><br><span class="line">  &#125;</span><br><span class="line">  say(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">static</span> run(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.staticName)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.staticName</span><br></pre></td></tr></table></figure>

<h4 id="4-6-2-特点"><a href="#4-6-2-特点" class="headerlink" title="4.6.2 特点"></a>4.6.2 特点</h4><p>静态方法中不能使用类型属性，但是可以使用静态属性</p>
<h2 id="5-接口"><a href="#5-接口" class="headerlink" title="5. 接口"></a>5. 接口</h2><p>在面向对象编程中，接口是一种规范的定义，它定义了行为和动作规范<br>在程序设计里面，接口起到一种限制和规范的作用。接口定义了某一批所需要遵守的规范<br>接口不关心这些类内部状态数据，也不关心这些类里面方法的实现细节它只规定了这批类里必须提供某些方法，提供这些方法的类就可以满足实际需要。<br>typescript中的接口类似java，同时还增加了更灵活的接口类型，包括属性、函数、可索引和类等</p>
<h3 id="5-1-属性类接口"><a href="#5-1-属性类接口" class="headerlink" title="5.1 属性类接口"></a>5.1 属性类接口</h3><h4 id="5-1-1-基本使用"><a href="#5-1-1-基本使用" class="headerlink" title="5.1.1 基本使用"></a>5.1.1 基本使用</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用interface 定义传入的对象必须携带firstname和lastname，以及对应的类型 </span></span><br><span class="line">interface FullName &#123;</span><br><span class="line">  <span class="attr">firstname</span>: string</span><br><span class="line">  <span class="attr">lastname</span>: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params">obj: FullName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(obj.firstname + obj.lastname)</span><br><span class="line">  <span class="comment">//限制可使用的参数</span></span><br><span class="line">  <span class="built_in">console</span>.log(obj.firstname + obj.lastname + obj.age)   <span class="comment">//  报错 Property &#x27;age&#x27; does not exist on type &#x27;FullName&#x27;.</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printName(&#123;</span><br><span class="line">  <span class="attr">firstname</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">  <span class="attr">lastname</span>: <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果想设置其他的属性需要定义对象接收</span></span><br><span class="line"><span class="comment">// const obj = &#123;</span></span><br><span class="line"><span class="comment">//   age: 18,</span></span><br><span class="line"><span class="comment">//   firstname: &#x27;zs&#x27;,</span></span><br><span class="line"><span class="comment">//   lastname: &#x27;ls&#x27;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// printName(obj)</span></span><br></pre></td></tr></table></figure>
<h4 id="5-1-2-可选属性"><a href="#5-1-2-可选属性" class="headerlink" title="5.1.2 可选属性"></a>5.1.2 可选属性</h4><ol>
<li><p>基本使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">interface FullName &#123;</span><br><span class="line">  <span class="attr">firstname</span>: string</span><br><span class="line">  <span class="comment">// 设置可选属性</span></span><br><span class="line">  lastname?: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printName</span>(<span class="params">obj: FullName</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(obj.firstname)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">printName(&#123;</span><br><span class="line">  <span class="attr">firstname</span>: <span class="string">&#x27;ls&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
<li><p>案例</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">interface Config &#123;</span><br><span class="line">  <span class="attr">type</span>: string</span><br><span class="line">  <span class="attr">url</span>: string</span><br><span class="line">  data?: string</span><br><span class="line">  dataType?: <span class="string">&#x27;json&#x27;</span></span><br><span class="line">  <span class="attr">success</span>: <span class="built_in">Function</span></span><br><span class="line">  <span class="comment">// 或者写成</span></span><br><span class="line">  <span class="comment">// success(res: any): void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">config: Config</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest()</span><br><span class="line">  xhr.open(config.type, config.url)</span><br><span class="line">  xhr.send(config.data)</span><br><span class="line">  xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (config.dataType === <span class="string">&#x27;json&#x27;</span>) &#123;</span><br><span class="line">        config.success &amp;&amp; config.success(<span class="built_in">JSON</span>.parse(xhr.responseText))</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        config.success &amp;&amp; config.success(<span class="built_in">JSON</span>.parse(xhr.responseText))</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ajax(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;get&#x27;</span>,</span><br><span class="line">  <span class="attr">url</span>: <span class="string">&#x27;http://jsonplaceholder.typicode.com/todos&#x27;</span>,</span><br><span class="line">  <span class="function"><span class="title">success</span>(<span class="params">res: <span class="built_in">Object</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(res)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="5-2-函数类型接口"><a href="#5-2-函数类型接口" class="headerlink" title="5.2 函数类型接口"></a>5.2 函数类型接口</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">interface encrypt &#123;</span><br><span class="line">  (key: string, <span class="attr">val</span>: string): string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> md5: encrypt = (key: string, <span class="attr">val</span>: string): <span class="function"><span class="params">string</span> =&gt;</span> key + val</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(md5(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;zs&#x27;</span>))</span><br></pre></td></tr></table></figure>
<h3 id="5-3-可索引接口"><a href="#5-3-可索引接口" class="headerlink" title="5.3 可索引接口"></a>5.3 可索引接口</h3><h4 id="5-3-1-特性"><a href="#5-3-1-特性" class="headerlink" title="5.3.1 特性"></a>5.3.1 特性</h4><p>可索引接口,主要是对数组和对象的约束 </p>
<h4 id="5-3-2-示例代码"><a href="#5-3-2-示例代码" class="headerlink" title="5.3.2 示例代码"></a>5.3.2 示例代码</h4></li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 约束数组</span></span><br><span class="line">interface UserArr &#123;</span><br><span class="line">  [index: number]: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> arr: UserArr = [<span class="string">&#x27;fly&#x27;</span>, <span class="string">&#x27;sky&#x27;</span>, <span class="string">&#x27;ssr&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(arr[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">// 约束对象</span></span><br><span class="line">interface UserObj &#123;</span><br><span class="line">  [index: string]: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj: UserObj = &#123; <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;fly&#x27;</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(obj.name)</span><br></pre></td></tr></table></figure>
<h3 id="5-4-类类型接口"><a href="#5-4-类类型接口" class="headerlink" title="5.4 类类型接口"></a>5.4 类类型接口</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">age</span>: number</span><br><span class="line">  run(): <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZS</span> <span class="title">implements</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="attr">age</span>: number</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string, age: number</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  run(): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;吃饭第一名&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> zs = <span class="keyword">new</span> ZS(<span class="string">&#x27;张三&#x27;</span>, <span class="number">18</span>)</span><br><span class="line">zs.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="5-4-接口扩展"><a href="#5-4-接口扩展" class="headerlink" title="5.4 接口扩展"></a>5.4 接口扩展</h3><h4 id="5-4-1-特性"><a href="#5-4-1-特性" class="headerlink" title="5.4.1 特性"></a>5.4.1 特性</h4><p>接口可以继承接口</p>
<h4 id="5-4-1-示例代码"><a href="#5-4-1-示例代码" class="headerlink" title="5.4.1 示例代码"></a>5.4.1 示例代码</h4><ol>
<li>方式1 <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义父接口</span></span><br><span class="line">interface Person &#123;</span><br><span class="line">  eat(): <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承Person接口</span></span><br><span class="line">interface Father <span class="keyword">extends</span> Person &#123;</span><br><span class="line">  run(): <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZS</span> <span class="title">implements</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">eat</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;吃的最多&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;跑的最快&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> zs = <span class="keyword">new</span> ZS(<span class="string">&#x27;张三&#x27;</span>)</span><br><span class="line"></span><br><span class="line">zs.eat()</span><br><span class="line">zs.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li>方式2<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  eat(): <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 继承接口</span></span><br><span class="line">interface Father <span class="keyword">extends</span> Person &#123;</span><br><span class="line">  run(): <span class="keyword">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 实现接口</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZS</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: string</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">eat</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;吃的最多&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;跑的最快&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LS</span> <span class="keyword">extends</span> <span class="title">ZS</span> <span class="title">implements</span> <span class="title">Father</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: string</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const zs = new ZS(&#x27;张三&#x27;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// zs.eat()</span></span><br><span class="line"><span class="comment">// zs.run()</span></span><br><span class="line"><span class="keyword">const</span> ls = <span class="keyword">new</span> LS(<span class="string">&#x27;李四&#x27;</span>)</span><br><span class="line">ls.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="5-5-泛型"><a href="#5-5-泛型" class="headerlink" title="5.5 泛型"></a>5.5 泛型</h3></li>
</ol>
<p>软件工程中，我们不仅要创建一致的定义良好的API，同时也要考虑可重用性。 组件不仅能够支持当前的数据类型，同时也能支持未来的数据类型，这在创建大型系统时为你提供了十分灵活的功能。</p>
<h4 id="5-5-1-泛型变量、泛型函数、泛型类"><a href="#5-5-1-泛型变量、泛型函数、泛型类" class="headerlink" title="5.5.1 泛型变量、泛型函数、泛型类"></a>5.5.1 泛型变量、泛型函数、泛型类</h4><p>泛型可以支持不特性的类似，一般使用T表示</p>
<p>泛型具体的类型是调用该方法的时候决定的</p>
<ol>
<li><p>泛型变量、泛型函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getData</span>&lt;<span class="title">T</span>&gt;(<span class="params">value: T</span>): <span class="title">T</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getData&lt;number&gt;(<span class="number">2</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>泛型类</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MinClass</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  public list: T[] = []</span><br><span class="line">  add(value: T): <span class="keyword">void</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.list.push(value)</span><br><span class="line">  &#125;</span><br><span class="line">  min(): T &#123;</span><br><span class="line">    <span class="keyword">let</span> minNum = <span class="built_in">this</span>.list[<span class="number">0</span>]</span><br><span class="line">    <span class="built_in">this</span>.list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (minNum &gt; item) &#123;</span><br><span class="line">        minNum = item</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> minNum</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> m1 = <span class="keyword">new</span> MinClass&lt;number&gt;()</span><br><span class="line"></span><br><span class="line">m1.add(<span class="number">11</span>)</span><br><span class="line">m1.add(<span class="number">1</span>)</span><br><span class="line">m1.add(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(m1.min())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> m2 = <span class="keyword">new</span> MinClass&lt;string&gt;()</span><br><span class="line"></span><br><span class="line">m2.add(<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">m2.add(<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">m2.add(<span class="string">&#x27;c&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(m2.min())</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="5-5-2-泛型接口"><a href="#5-5-2-泛型接口" class="headerlink" title="5.5.2 泛型接口"></a>5.5.2 泛型接口</h4></li>
<li><p>方式1 </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 方式1 </span></span><br><span class="line">interface ConfigFn &#123;</span><br><span class="line">  &lt;T&gt;(value: T): T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// let getData: ConfigFn = function &lt;T&gt;(value: T): T &#123;</span></span><br><span class="line"><span class="comment">//   return value</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> getData: ConfigFn = &lt;T&gt;(value: T): <span class="function"><span class="params">T</span> =&gt;</span> value</span><br><span class="line"><span class="built_in">console</span>.log(getData&lt;string&gt;(<span class="string">&#x27;fly&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
<li><p>方式2</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">interface Config&lt;T&gt; &#123;</span><br><span class="line">  (value: T): T</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// const getData: Config&lt;string&gt; = function &lt;T&gt;(value: T): T &#123;</span></span><br><span class="line"><span class="comment">//   return value</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> getData: Config&lt;string&gt; = &lt;T&gt;(value: T): <span class="function"><span class="params">T</span> =&gt;</span> value</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(getData(<span class="string">&#x27;fly&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="5-5-3-泛型类"><a href="#5-5-3-泛型类" class="headerlink" title="5.5.3  泛型类"></a>5.5.3  泛型类</h4><ol>
<li>类参数类型<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  username!: string</span><br><span class="line">  password!: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DB</span> </span>&#123;</span><br><span class="line">  add(user: User): boolean &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(user)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> user = <span class="keyword">new</span> User()</span><br><span class="line"></span><br><span class="line">user.username = <span class="string">&#x27;fly&#x27;</span></span><br><span class="line">user.password = <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> db = <span class="keyword">new</span> DB()</span><br><span class="line">db.add(user)</span><br></pre></td></tr></table></figure></li>
<li>泛型类参数类型<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 泛型类参数类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DB</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  add(info: T): boolean &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(info)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  username!: string</span><br><span class="line">  password!: string</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Goods</span> </span>&#123;</span><br><span class="line">  title!: string</span><br><span class="line">  ctime!: string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> User()</span><br><span class="line">user.username = <span class="string">&#x27;fly&#x27;</span></span><br><span class="line">user.password = <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> goods = <span class="keyword">new</span> Goods()</span><br><span class="line">goods.title = <span class="string">&#x27;可爱多&#x27;</span></span><br><span class="line">goods.ctime = <span class="string">&#x27;2020-09-08 14:25:03&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> db1 = <span class="keyword">new</span> DB&lt;User&gt;()</span><br><span class="line">db1.add(user)</span><br><span class="line"><span class="keyword">var</span> db2 = <span class="keyword">new</span> DB&lt;Goods&gt;()</span><br><span class="line">db2.add(goods)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2015-2022
        <i class="ri-heart-fill heart_icon"></i> John Doe
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src=''></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/uti/index.html">屏幕录制工具</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/wo/index.html">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
</body>

</html>